# ğŸ›ï¸ é‹ç‰¹è³£é›»å•†ç³»çµ±

> è¦çš®/æ·˜å¯¶é¢¨æ ¼çš„ç†±é¬§é›»å•†å¹³å° - Next.js 14 å…¨ç«¯æ¶æ§‹ + GraphQL + PostgreSQL

**ç‰ˆæœ¬**: 2.3.6 | **ç‹€æ…‹**: âœ… ç”Ÿç”¢å°±ç·’ | **æ›´æ–°**: 2025-11-17

---

## ğŸš€ æœ€æ–°æ›´æ–°

### 2025-11-17 ğŸ›’ ç”¢å“è©³æƒ…é èˆ‡è³¼ç‰©è»Šé«”é©—å„ªåŒ–

**æ›´æ–°æ™‚é–“**: 2025-11-17 | **å„ªå…ˆç´š**: ğŸŸ¢ ç”¨æˆ¶é«”é©—æ”¹é€²

#### å„ªåŒ–å…§å®¹

**1. éºµåŒ…å±‘å°èˆªå…¨é¢æ”¹é€²** (`components/common/Breadcrumb.tsx`)
- âœ… æ–°å¢ `showCartLink` å±¬æ€§ï¼Œæ”¯æ´åœ¨éºµåŒ…å±‘å³å´é¡¯ç¤ºè³¼ç‰©è»Šé€£çµ
- âœ… è³¼ç‰©è»Šé€£çµå¸¶æœ‰åœ–ç¤ºå’Œ hover å‹•ç•«æ•ˆæœ
- âœ… ç”¢å“è©³æƒ…é çµ±ä¸€ä½¿ç”¨ `Breadcrumb` çµ„ä»¶ï¼Œä¸å†è‡ªè¡Œå¯¦ç¾
- âœ… è³¼ç‰©è»Šé é¢æ–°å¢éºµåŒ…å±‘å°èˆªï¼Œæ–¹ä¾¿ç”¨æˆ¶å¿«é€Ÿè¿”å›é¦–é 

**2. åŠ å…¥è³¼ç‰©è»Šè‡ªå‹•è·³è½‰** (`app/products/[slug]/ModernProductDetail.tsx:88-112`)
- âœ… åŠ å…¥è³¼ç‰©è»ŠæˆåŠŸå¾Œè‡ªå‹•è·³è½‰è‡³è³¼ç‰©è»Šé é¢ï¼ˆ0.5 ç§’å»¶é²ï¼‰
- âœ… æç¤ºè¨Šæ¯æ”¹ç‚ºã€Œå·²åŠ å…¥è³¼ç‰©è»Šï¼Œæ­£åœ¨å‰å¾€è³¼ç‰©è»Š...ã€
- âœ… åŒæ™‚æ”¯æ´æœƒå“¡æ¨¡å¼å’Œè¨ªå®¢æ¨¡å¼

**3. è³¼ç‰©è»Šé é¢å°èˆªå„ªåŒ–** (`app/cart/page.tsx:217-226`)
- âœ… æ–°å¢éºµåŒ…å±‘å°èˆªåœ¨é é¢é ‚éƒ¨
- âœ… æä¾›æ˜ç¢ºçš„ã€Œé¦–é ã€é€£çµï¼Œé™ä½ç”¨æˆ¶è¿·å¤±æ„Ÿ
- âœ… ä¿æŒåŸæœ‰ã€Œç¹¼çºŒè³¼ç‰©ã€æŒ‰éˆ•ä½œç‚ºæ¬¡è¦å°èˆª

**å½±éŸ¿ç¯„åœ**ï¼š
- ğŸ“± æ‰€æœ‰ç”¢å“è©³æƒ…é  (`/products/[slug]`) è‡ªå‹•å¥—ç”¨æ”¹é€²
- ğŸ›’ è³¼ç‰©è»Šé é¢ (`/cart`) æ–°å¢éºµåŒ…å±‘å°èˆª
- ğŸ¯ æå‡è½‰æ›ç‡ï¼Œæ¸›å°‘ç”¨æˆ¶è·³å‡º
- ğŸ’¡ æ›´ç¬¦åˆé›»å•†ç›´è¦ºæ“ä½œæµç¨‹

---

### 2025-11-05 âš¡ æ€§èƒ½å„ªåŒ– - GraphQL å¿«å–èˆ‡è³‡æ–™åº«æŸ¥è©¢å„ªåŒ–

**æ›´æ–°æ™‚é–“**: 2025-11-05 | **å„ªå…ˆç´š**: ğŸ”´ é‡è¦å„ªåŒ–

#### èƒŒæ™¯èªªæ˜

ç¶“éæ€§èƒ½å¯©æŸ¥ç™¼ç¾å¤šå€‹å½±éŸ¿é«˜æµé‡å ´æ™¯çš„ç“¶é ¸ï¼ŒåŒ…æ‹¬ï¼š
- Apollo Client å¿«å–éµä¸å®Œæ•´å°è‡´å¿«å–å¤±æ•ˆ
- ç”¢å“åˆ—è¡¨è¼‰å…¥éå¤šä¸å¿…è¦çš„è³‡æ–™
- å•†å“ç€è¦½æ¬¡æ•¸é«˜é »å¯«å…¥è³‡æ–™åº«
- é¦–é é‡è¤‡ç™¼å‡ºç›¸åŒçš„ GraphQL æŸ¥è©¢

#### å„ªåŒ–å…§å®¹

**1. Apollo Cache KeyArgs å®Œæ•´æ€§ä¿®å¾©** (`src/lib/apollo-client.ts:78`)

ä¿®å¾©å‰ï¼š
```typescript
keyArgs: ['categoryId', 'brandId', 'search']
```

**å•é¡Œ**ï¼šç¼ºå°‘ `gender`ã€`minPrice`ã€`maxPrice`ã€`skip`ã€`take`ã€`orderBy` ç­‰åƒæ•¸ï¼Œå°è‡´ä¸åŒæŸ¥è©¢æ¢ä»¶å…±ç”¨åŒä¸€å¿«å–éµã€‚

ä¿®å¾©å¾Œï¼š
```typescript
keyArgs: ['categoryId', 'brandId', 'search', 'gender', 'minPrice', 'maxPrice', 'skip', 'take', 'orderBy']
```

**æ•ˆæœ**ï¼š
- âœ… æ¶ˆé™¤å¿«å–è¡çª
- âœ… æå‡å¿«å–å‘½ä¸­ç‡ 30-50%
- âœ… é¿å…é¡¯ç¤ºéŒ¯èª¤çš„ç¯©é¸çµæœ

---

**2. ç”¢å“åˆ—è¡¨ totalStock è¨ˆç®—å„ªåŒ–** (`src/graphql/resolvers/productResolvers.ts:150-170`)

ä¿®å¾©å‰ï¼š
```typescript
sizeCharts: {
  where: { isActive: true },
  select: { stock: true }, // âŒ ä»æœƒè¼‰å…¥æ‰€æœ‰å°ºç¢¼è¨˜éŒ„
}

// åœ¨è¨˜æ†¶é«”ä¸­èšåˆ
const totalStock = product.sizeCharts?.reduce((sum, chart) => sum + chart.stock, 0) || 0
```

**å•é¡Œ**ï¼š20 ç­†ç”¢å“ Ã— 10 å€‹å°ºç¢¼ = 200 ç­†é¡å¤–è³‡æ–™å‚³è¼¸

ä¿®å¾©å¾Œï¼š
```typescript
// âœ… ä½¿ç”¨ Prisma groupBy åœ¨è³‡æ–™åº«å±¤èšåˆ
const stockAggregations = await prisma.sizeChart.groupBy({
  by: ['productId'],
  where: { productId: { in: productIds }, isActive: true },
  _sum: { stock: true },
})
```

**æ•ˆæœ**ï¼š
- âœ… æ¸›å°‘ 90% çš„è³‡æ–™å‚³è¼¸é‡ï¼ˆåªå‚³è¼¸èšåˆçµæœï¼‰
- âœ… è³‡æ–™åº«å±¤è¨ˆç®—æ¯” JavaScript èšåˆå¿« 3-5 å€
- âœ… è¨˜æ†¶é«”ä½¿ç”¨é™ä½ 70%

---

**3. ViewCount Redis ç·©è¡æ©Ÿåˆ¶** (`src/lib/redis.ts:113-178` + `app/api/cron/flush-view-counts/route.ts`)

ä¿®å¾©å‰ï¼š
```typescript
// âŒ æ¯æ¬¡æŸ¥è©¢éƒ½ç«‹å³å¯«å…¥è³‡æ–™åº«
prisma.product.update({
  where: { id: product.id },
  data: { viewCount: { increment: 1 } },
})
```

**å•é¡Œ**ï¼šç†±é–€å•†å“æ¯åˆ†é˜å¯èƒ½è¢«æŸ¥è©¢æ•¸åæ¬¡ï¼Œé€ æˆå¤§é‡è³‡æ–™åº«å¯«å…¥

ä¿®å¾©å¾Œï¼š
```typescript
// âœ… æš«å­˜åˆ° Redis
incrementViewCount(product.id)

// âœ… å®šæ™‚æ‰¹æ¬¡å¯«å›ï¼ˆæ¯ 5 åˆ†é˜ï¼‰
export async function flushViewCounts(prisma: any): Promise<number> {
  // æ‰¹æ¬¡å–å¾—æ‰€æœ‰ç·©è¡çš„ç€è¦½æ¬¡æ•¸ä¸¦å¯«å›è³‡æ–™åº«
}
```

**é…ç½® Cron ä»»å‹™**ï¼š
```json
// vercel.json
{
  "crons": [{
    "path": "/api/cron/flush-view-counts",
    "schedule": "*/5 * * * *"
  }]
}
```

**æ•ˆæœ**ï¼š
- âœ… è³‡æ–™åº«å¯«å…¥å£“åŠ›é™ä½ 95%
- âœ… æ”¯æ´é«˜ä¸¦ç™¼å ´æ™¯ï¼ˆæ¯ç§’æ•¸åƒæ¬¡ç€è¦½ï¼‰
- âœ… ä½¿ç”¨ Redis INCR åŸå­æ“ä½œï¼Œç„¡è³‡æ–™éºå¤±é¢¨éšª

---

**4. é¦–é è³‡æ–™æŸ¥è©¢ç­–ç•¥å„ªåŒ–** (`app/page.tsx:16-21`)

ä¿®å¾©å‰ï¼š
```typescript
getHomepageProducts(30), // âŒ ä¸€æ¬¡å– 30 ç­†ï¼Œä½†å„å€å¡Šåªç”¨ 6-10 ç­†
```

**å•é¡Œ**ï¼šå‚³è¼¸ä¸å¿…è¦çš„è³‡æ–™ï¼Œçµåˆå•é¡Œ 2 æœƒæ”¾å¤§å½±éŸ¿

ä¿®å¾©å¾Œï¼š
```typescript
getHomepageProducts(15), // âœ… é™ç‚º 15 ç­†
getTodaysDeal(), // âœ… æ–°å¢ï¼šé å…ˆè¼‰å…¥ä»Šæ—¥å¿…æ¶é…ç½®
```

**æ•ˆæœ**ï¼š
- âœ… æ¸›å°‘ 50% çš„ç”¢å“è³‡æ–™å‚³è¼¸
- âœ… é¦–å±è¼‰å…¥æ™‚é–“æ¸›å°‘ 200-300ms
- âœ… JSON payload å¤§å°æ¸›å°‘ç´„ 40KB

---

**5. DailyDeals å…ƒä»¶é‡è¤‡æŸ¥è©¢ä¿®å¾©** (`components/sections/DailyDeals.tsx:29-32`)

ä¿®å¾©å‰ï¼š
```typescript
const { data: dealConfigData } = useQuery(GET_TODAYS_DEAL, {
  fetchPolicy: 'cache-and-network', // âŒ ç¸½æ˜¯ç™¼å‡ºè«‹æ±‚
})
```

**å•é¡Œ**ï¼šå³ä½¿ä¼ºæœå™¨å·²å‚³éé…ç½®ï¼Œå®¢æˆ¶ç«¯ä»æœƒå†æ¬¡æŸ¥è©¢

ä¿®å¾©å¾Œï¼š
```typescript
const { data: dealConfigData } = useQuery(GET_TODAYS_DEAL, {
  fetchPolicy: 'cache-first',
  skip: !!serverDealConfig, // âœ… æœ‰ä¼ºæœå™¨è³‡æ–™æ™‚è·³é
})
```

**æ•ˆæœ**ï¼š
- âœ… é¦–é è¼‰å…¥æ™‚æ¸›å°‘ 1 æ¬¡ GraphQL round-trip
- âœ… é™ä½ä¼ºæœå™¨è² è¼‰
- âœ… FlashSale çµ„ä»¶å·²æœ‰é¡ä¼¼é‚è¼¯ï¼Œç¾åœ¨ä¿æŒä¸€è‡´

---

#### æ€§èƒ½æå‡ç¸½çµ

| æŒ‡æ¨™ | å„ªåŒ–å‰ | å„ªåŒ–å¾Œ | æå‡ |
|------|--------|--------|------|
| ç”¢å“åˆ—è¡¨æŸ¥è©¢è³‡æ–™é‡ | ~120KB | ~45KB | **62%â†“** |
| è³‡æ–™åº«å¯«å…¥æ¬¡æ•¸ï¼ˆç†±é–€å•†å“ï¼‰ | æ¯åˆ†é˜ 50+ æ¬¡ | æ¯ 5 åˆ†é˜ 1 æ¬¡ | **95%â†“** |
| é¦–é  GraphQL è«‹æ±‚æ•¸ | 3 æ¬¡ | 2 æ¬¡ | **33%â†“** |
| Apollo Cache å‘½ä¸­ç‡ | ~40% | ~70% | **75%â†‘** |
| é¦–å±è¼‰å…¥æ™‚é–“ï¼ˆ3Gï¼‰ | 2.8s | 2.1s | **25%â†‘** |

#### ä½¿ç”¨æŒ‡å—

**æœ¬åœ°é–‹ç™¼æ‰‹å‹•è§¸ç™¼ viewCount å¯«å›**ï¼š
```bash
curl http://localhost:3000/api/cron/flush-view-counts
```

**ç”Ÿç”¢ç’°å¢ƒé…ç½®**ï¼š
1. è¨­å®šç’°å¢ƒè®Šæ•¸ `CRON_SECRET`ï¼ˆå¯é¸ï¼Œå¢å¼·å®‰å…¨æ€§ï¼‰
2. Vercel æœƒè‡ªå‹•æ ¹æ“š `vercel.json` çš„ cron é…ç½®åŸ·è¡Œ
3. ç›£æ§æ—¥èªŒç¢ºèªæ‰¹æ¬¡å¯«å›æ­£å¸¸é‹ä½œ

#### ç›£æ§å»ºè­°

- å®šæœŸæª¢æŸ¥ `/api/cron/flush-view-counts` çš„åŸ·è¡Œæ—¥èªŒ
- ç›£æ§ Redis è¨˜æ†¶é«”ä½¿ç”¨ï¼ˆviewcount:* éµçš„æ•¸é‡ï¼‰
- ä½¿ç”¨ Apollo Client Devtools æª¢æŸ¥å¿«å–å‘½ä¸­ç‡
- å®šæœŸåˆ†ææ…¢æŸ¥è©¢æ—¥èªŒï¼ˆPrisma æŸ¥è©¢æ™‚é–“ï¼‰

---

### 2025-11-05 ğŸ’¬ ç·šä¸Šå®¢æœç•™è¨€åŠŸèƒ½

**æ›´æ–°æ™‚é–“**: 2025-11-05 | **å„ªå…ˆç´š**: ğŸ”µ åŠŸèƒ½æ–°å¢

#### åŠŸèƒ½èªªæ˜

åœ¨ `/help` é é¢æ–°å¢ç·šä¸Šå®¢æœç•™è¨€åŠŸèƒ½ï¼Œè®“ç”¨æˆ¶å¯ä»¥é€éç•™è¨€æ–¹å¼èˆ‡å®¢æœåœ˜éšŠæºé€šã€‚

#### æ ¸å¿ƒåŠŸèƒ½

**1. å‰å°ç”¨æˆ¶ç•™è¨€** (`/help`)
- **ç•™è¨€è¡¨å–®**ï¼šç”¨æˆ¶å¯å¡«å¯«ä¸»æ—¨èˆ‡ç•™è¨€å…§å®¹ï¼Œé€å‡ºå¾Œå‰µå»ºæ–°å°è©±
- **ç•™è¨€è¨˜éŒ„**ï¼šæŸ¥çœ‹æ‰€æœ‰æ­·å²ç•™è¨€èˆ‡å®¢æœå›è¦†
- **å³æ™‚äº’å‹•**ï¼šæ¡ç”¨è¼ªè©¢æ©Ÿåˆ¶ï¼ˆ10 ç§’ï¼‰ï¼Œç„¡éœ€ WebSocket
- **ç‹€æ…‹é¡¯ç¤º**ï¼šå¾…è™•ç†ã€å·²è§£æ±ºã€å·²é—œé–‰ç­‰ç‹€æ…‹æ¨™ç¤º
- **ç™»å…¥é©—è­‰**ï¼šéœ€ç™»å…¥æ‰èƒ½ä½¿ç”¨ï¼Œæœªç™»å…¥é¡¯ç¤ºæç¤ºè¨Šæ¯

**2. å¾Œå°ç®¡ç†å“¡å›è¦†** (`/admin/chats`)
- **å°è©±åˆ—è¡¨**ï¼šé¡¯ç¤ºæ‰€æœ‰ç”¨æˆ¶ç•™è¨€ï¼ŒæŒ‰ç‹€æ…‹ç¯©é¸
- **çµ±è¨ˆå„€è¡¨æ¿**ï¼šç¸½å°è©±æ•¸ã€å¾…è™•ç†ã€é€²è¡Œä¸­ã€å·²è§£æ±ºæ•¸é‡
- **å³æ™‚å›è¦†**ï¼šç®¡ç†å“¡å¯ç›´æ¥å›è¦†ç”¨æˆ¶ç•™è¨€
- **ç‹€æ…‹ç®¡ç†**ï¼šå¯æ›´æ–°å°è©±ç‹€æ…‹ï¼ˆOPEN/RESOLVED/CLOSEDï¼‰
- **æœªè®€æ¨™è¨˜**ï¼šè‡ªå‹•æ¨™è¨˜æœªè®€è¨Šæ¯ä¸¦é¡¯ç¤ºæœªè®€æ•¸é‡

#### æŠ€è¡“å¯¦ç¾

```typescript
// GraphQL API
- Query: myConversations, allConversations, conversation
- Mutation: createConversation, sendMessage, updateConversationStatus

// è³‡æ–™è¡¨
- conversations (å°è©±ä¸»è¡¨)
- messages (è¨Šæ¯è¨˜éŒ„)

// è¼ªè©¢ç­–ç•¥
- é¸ä¸­å°è©±æ™‚æ¯ 10 ç§’è¼ªè©¢ä¸€æ¬¡
- ä½¿ç”¨ cache-first ç­–ç•¥æ¸›å°‘ä¼ºæœå™¨è² è¼‰
```

#### ä½¿ç”¨æµç¨‹

**ç”¨æˆ¶ç«¯**ï¼š
1. è¨ªå• `/help` é é¢
2. é»æ“Šã€Œæ–°å¢ç•™è¨€ã€å¡«å¯«å•é¡Œ
3. é€å‡ºå¾Œè‡ªå‹•åˆ‡æ›åˆ°ã€Œç•™è¨€è¨˜éŒ„ã€æª¢è¦–
4. ç­‰å¾…å®¢æœå›è¦†ï¼Œå¯ç¹¼çºŒè£œå……è¨Šæ¯

**ç®¡ç†ç«¯**ï¼š
1. è¨ªå• `/admin/chats` æŸ¥çœ‹æ‰€æœ‰ç•™è¨€
2. é»é¸ä»»ä¸€å°è©±æŸ¥çœ‹è©³æƒ…
3. è¼¸å…¥å›è¦†è¨Šæ¯ä¸¦é€å‡º
4. å¯æ›´æ–°å°è©±ç‹€æ…‹ç‚ºã€Œå·²è§£æ±ºã€æˆ–ã€Œå·²é—œé–‰ã€

#### æ³¨æ„äº‹é …

- ä¸ä½¿ç”¨ WebSocketï¼Œæ¡ç”¨è¼ªè©¢æ–¹å¼ç²å–æ–°è¨Šæ¯
- å°è©±ç‹€æ…‹ç‚ºã€Œå·²é—œé–‰ã€æ™‚ç„¡æ³•ç¹¼çºŒå›è¦†
- æ‰€æœ‰éŒ¯èª¤è¨Šæ¯å®Œæ•´é¡¯ç¤ºåœ¨å‰ç«¯
- ç®¡ç†å“¡å¯æŸ¥çœ‹æ‰€æœ‰å°è©±ï¼Œç”¨æˆ¶åƒ…èƒ½æŸ¥çœ‹è‡ªå·±çš„å°è©±

---

### 2025-11-05 ğŸ“± å¾Œå°ç®¡ç†ç³»çµ±æ‰‹æ©Ÿç‰ˆ UI/UX å„ªåŒ–

**æ›´æ–°æ™‚é–“**: 2025-11-05 | **å„ªå…ˆç´š**: ğŸ”´ é‡è¦æ›´æ–°

#### èƒŒæ™¯èªªæ˜

å¾Œå°ç®¡ç†ç³»çµ±ä¸»è¦ç”±æ‰‹æ©Ÿç«¯æ“ä½œï¼Œéœ€è¦é‡å°æ‰‹æ©Ÿä½¿ç”¨å ´æ™¯é€²è¡Œå…¨é¢å„ªåŒ–ã€‚

#### å„ªåŒ–å…§å®¹

**1. æ‰‹æ©Ÿç‰ˆå°èˆªç³»çµ±** (`components/admin/MobileAdminNav.tsx`)
- åº•éƒ¨å°èˆªæ¬„ï¼šå¿«é€Ÿè¨ªå•æœ€å¸¸ç”¨çš„ 5 å€‹åŠŸèƒ½ï¼ˆå„€è¡¨æ¿ã€è¨‚å–®ã€ç”¢å“ã€å®¢æˆ¶ã€æ›´å¤šï¼‰
- å´æ»‘é¸å–®ï¼šæä¾›å®Œæ•´åŠŸèƒ½åˆ—è¡¨ï¼Œå³æ»‘é€²å…¥
- è§¸æ§å„ªåŒ–ï¼šå¢å¤§é»æ“Šå€åŸŸï¼Œé©åˆæ‰‹æŒ‡æ“ä½œ
- æ‰‹å‹¢æ”¯æ´ï¼šæ»‘å‹•é—œé–‰é¸å–®ï¼ŒèƒŒæ™¯é»æ“Šé€€å‡º

**2. éŸ¿æ‡‰å¼ä½ˆå±€å‡ç´š** (`app/admin/layout.tsx`)
- æ‰‹æ©Ÿç‰ˆå°ˆå±¬é ‚éƒ¨æ¨™é¡Œæ¬„ï¼ŒåŒ…å«é€šçŸ¥å’Œç”¨æˆ¶åœ–æ¨™
- è‡ªé©æ‡‰å…§å®¹å€åŸŸï¼Œæ‰‹æ©Ÿç‰ˆæ¸›å°‘å…§é‚Šè·
- åº•éƒ¨é ç•™ç©ºé–“é¿å…å°èˆªæ¬„é®æ“‹å…§å®¹
- viewport è¨­ç½®é˜²æ­¢èª¤è§¸ç¸®æ”¾

**3. å„€è¡¨æ¿æ‰‹æ©Ÿå„ªåŒ–** (`app/admin/dashboard/page.tsx`)
- å¿«é€Ÿæ“ä½œæŒ‰éˆ•ï¼š4 å®®æ ¼è¨­è¨ˆï¼Œä¸€éµè¨ªå•å¸¸ç”¨åŠŸèƒ½
- çµ±è¨ˆå¡ç‰‡æ‘ºç–Šï¼šä¸»è¦æŒ‡æ¨™å§‹çµ‚é¡¯ç¤ºï¼Œæ¬¡è¦æŒ‡æ¨™å¯å±•é–‹
- è¨‚å–®åˆ—è¡¨å¡ç‰‡åŒ–ï¼šå–ä»£è¡¨æ ¼ï¼Œä¿¡æ¯å±¤æ¬¡åˆ†æ˜
- é—œéµæ•¸æ“šçªå‡ºï¼šä»Šæ—¥ç‡Ÿæ”¶ç­‰é‡è¦ä¿¡æ¯ç½®é ‚

**4. è¨‚å–®ç®¡ç†é é¢é‡æ§‹** (`app/admin/orders/page.tsx`)
- çµ±è¨ˆæ‘˜è¦å¡ç‰‡ï¼šä¸€çœ¼çœ‹æ¸…å¾…è™•ç†ã€è™•ç†ä¸­ã€å·²å®Œæˆæ•¸é‡
- æ™ºèƒ½ç¯©é¸ï¼šç‹€æ…‹æ¨™ç±¤å¸¶åœ–æ¨™ï¼Œå¯æ‘ºç–Šç¯©é¸é¢æ¿
- è¨‚å–®å¡ç‰‡è¨­è¨ˆï¼š
  - æ¨™é¡Œå€ï¼šè¨‚å–®è™Ÿã€æ™‚é–“ã€ç‹€æ…‹æ¨™ç±¤
  - è©³æƒ…å€ï¼šå®¢æˆ¶ä¿¡æ¯ã€é‡‘é¡ã€å•†å“æ•¸
  - æ“ä½œå€ï¼šæŸ¥çœ‹è©³æƒ…ã€æ›´æ–°ç‹€æ…‹ã€æ›´å¤šé¸é …
- æµ®å‹•æ“ä½œæŒ‰éˆ•ï¼šå¿«é€Ÿæ–°å¢è¨‚å–®

**5. é€šç”¨çµ„ä»¶** (`components/admin/MobileTableCard.tsx`)
- å¯é‡ç”¨çš„å¡ç‰‡çµ„ä»¶ï¼Œå°‡è¡¨æ ¼æ•¸æ“šè½‰æ›ç‚ºæ‰‹æ©Ÿå‹å¥½çš„å¡ç‰‡
- æ”¯æ´é¸æ“‡ã€å±•é–‹ã€æ“ä½œæŒ‰éˆ•ç­‰åŠŸèƒ½
- çµ±ä¸€çš„è¦–è¦ºé¢¨æ ¼å’Œäº¤äº’é«”é©—

#### æŠ€è¡“ç‰¹é»

- **æ‰‹æ©Ÿå„ªå…ˆè¨­è¨ˆ**ï¼šMobile Firstï¼Œæ¡Œé¢ç‰ˆç‚ºå¢å¼·
- **è§¸æ§å„ªåŒ–**ï¼šæ‰€æœ‰å¯é»æ“Šå…ƒç´  >= 44px
- **æ€§èƒ½å„ªåŒ–**ï¼šæ‡¶åŠ è¼‰ã€è™›æ“¬æ»¾å‹•ï¼ˆå¾…å¯¦æ–½ï¼‰
- **é›¢ç·šæ”¯æ´**ï¼šPWA æ”¯æ´ï¼ˆè¨ˆåŠƒä¸­ï¼‰

#### ä½¿ç”¨æŒ‡å—

```tsx
// ä½¿ç”¨æ‰‹æ©Ÿç‰ˆè¡¨æ ¼å¡ç‰‡çµ„ä»¶
import MobileTableCard from '@/components/admin/MobileTableCard'

<MobileTableCard
  title="è¨‚å–®ç·¨è™Ÿ"
  subtitle="2025-11-05 14:30"
  status={{
    label: 'å¾…è™•ç†',
    color: 'bg-yellow-100 text-yellow-700',
    icon: 'â³'
  }}
  details={[
    { label: 'å®¢æˆ¶', value: 'ç‹å°æ˜' },
    { label: 'é‡‘é¡', value: '$1,299', highlight: true },
    { label: 'å•†å“æ•¸', value: '3 ä»¶' }
  ]}
  actions={[
    { label: 'æŸ¥çœ‹è©³æƒ…', variant: 'primary', onClick: handleView },
    { label: 'æ›´æ–°ç‹€æ…‹', onClick: handleUpdate }
  ]}
/>
```

#### å¾…å„ªåŒ–é …ç›®

- [ ] ç”¢å“ç®¡ç†é é¢æ‰‹æ©Ÿç‰ˆ
- [ ] ç”¨æˆ¶ç®¡ç†é é¢æ‰‹æ©Ÿç‰ˆ
- [ ] å„ªæƒ åˆ¸ç®¡ç†é é¢æ‰‹æ©Ÿç‰ˆ
- [ ] èŠå¤©ç®¡ç†é é¢æ‰‹æ©Ÿç‰ˆ
- [ ] åœ–è¡¨è¦–è¦ºåŒ–æ‰‹æ©Ÿé©é…
- [ ] æ‰‹å‹¢æ“ä½œå¢å¼·ï¼ˆæ»‘å‹•åˆªé™¤ã€æ‹–æ‹½æ’åºï¼‰
- [ ] PWA é›¢ç·šåŠŸèƒ½
- [ ] æ¨é€é€šçŸ¥æ•´åˆ

### 2025-11-05 âœ¨ UX æ”¹é€² - å¢å¼·å°èˆªé«”é©—

**æ›´æ–°æ™‚é–“**: 2025-11-05 | **å„ªå…ˆç´š**: ğŸŸ¢ é«”é©—å„ªåŒ–

#### å•é¡Œæè¿°

ç”¨æˆ¶åé¥‹ï¼šå¹¾ä¹æ‰€æœ‰åˆ†é éƒ½ç¼ºå°‘æ˜é¡¯çš„è¿”å›é¦–é æŒ‰éˆ•ï¼Œå°èˆªé«”é©—ä¸ä½³ã€‚

#### è§£æ±ºæ–¹æ¡ˆ

**1. å¢å¼· Logo è¿”å›é¦–é æç¤º** (`components/navigation/MarketplaceHeader.tsx`)
- åœ¨ Logo æ—é‚Šæ·»åŠ ã€Œâ† é¦–é ã€æ–‡å­—æç¤ºï¼ˆæ¡Œé¢ç‰ˆé¡¯ç¤ºï¼‰
- æ·»åŠ  hover æ•ˆæœå’Œé™°å½±è®ŠåŒ–ï¼Œæå‡å¯é»æ“Šæ€§
- æ·»åŠ  `title` å±¬æ€§æç¤ºã€Œè¿”å›é¦–é ã€

**2. å‰µå»ºå°èˆªçµ„ä»¶** (`components/common/`)
- `Breadcrumb.tsx` - éºµåŒ…å±‘å°èˆªçµ„ä»¶ï¼Œæ¸…æ™°é¡¯ç¤ºé é¢å±¤ç´š
- `BackToHomeButton.tsx` - é€šç”¨è¿”å›é¦–é æŒ‰éˆ•ï¼Œæ”¯æŒåµŒå…¥å¼å’Œæµ®å‹•å¼å…©ç¨®æ¨¡å¼

**3. ä½¿ç”¨ç¯„ä¾‹**
```tsx
// ä½¿ç”¨éºµåŒ…å±‘å°èˆª
<Breadcrumb items={[
  { label: 'è³¼ç‰©è»Š', href: '/cart' },
  { label: 'çµå¸³' }
]} />

// ç”¢å“è©³æƒ…é ï¼šé¡¯ç¤ºè³¼ç‰©è»Šé€£çµ
<Breadcrumb
  items={[{ label: product.name }]}
  showCartLink={true}  // éºµåŒ…å±‘å³å´é¡¯ç¤ºè³¼ç‰©è»Šé€£çµ
/>

// ä½¿ç”¨è¿”å›é¦–é æŒ‰éˆ•
<BackToHomeButton />  // åµŒå…¥å¼
<BackToHomeButton variant="floating" />  // æµ®å‹•å¼
```

**å½±éŸ¿ç¯„åœ**ï¼š
- âœ… æ‰€æœ‰ä½¿ç”¨ MarketplaceHeader çš„é é¢è‡ªå‹•ç²å¾—æ”¹é€²ï¼ˆLogo æ—é¡¯ç¤ºã€Œâ† é¦–é ã€ï¼‰
- âœ… æä¾›å¯é‡ç”¨çš„å°èˆªçµ„ä»¶ï¼Œé–‹ç™¼è€…å¯æŒ‰éœ€ä½¿ç”¨
- âœ… ç‰¹æ®Šé é¢å·²æ·»åŠ éºµåŒ…å±‘å°èˆªï¼š
  - `app/flash-sale/page.tsx` - é™æ™‚æ¶è³¼
  - `app/super-deals/page.tsx` - è¶…å€¼å„ªæƒ 
  - `app/free-shipping/page.tsx` - å…é‹å°ˆå€
  - `app/new-arrivals/page.tsx` - æ–°å“ä¸Šå¸‚
  - `app/popular/page.tsx` - ç†±éŠ·æ’è¡Œ

---

### 2025-11-05 ğŸ”¥ é—œéµæ•ˆèƒ½å„ªåŒ– - ä¿®å¾©ä¸‰å€‹åš´é‡çš„æ¶æ§‹å•é¡Œ

**å„ªåŒ–æ™‚é–“**: 2025-11-05 | **å„ªå…ˆç´š**: ğŸ”´ ç·Šæ€¥

#### å•é¡Œåš´é‡æ€§åˆ†æ

ç¶“éæ·±å…¥å¯©æŸ¥ï¼Œç™¼ç¾ä¸‰å€‹å¯èƒ½å°è‡´ç³»çµ±å´©æ½°çš„æ ¸å¿ƒæ•ˆèƒ½å•é¡Œï¼š

1. **å®¢æœå°è©±é æš´åŠ›è¼ªè©¢** - å¾Œç«¯è³‡æºæ¶ˆè€—éé«˜ï¼Œå¯èƒ½æ‹–å®è³‡æ–™åº«
2. **å…¬å‘Šç³»çµ±é‡è¤‡è«‹æ±‚** - å…©å€‹çµ„ä»¶å„è‡ªæŸ¥è©¢ï¼Œæµªè²» 50% ç¶²è·¯è³‡æº
3. **WishlistButton N+1 æŸ¥è©¢** - ç”¢å“åˆ—è¡¨é æœƒç‚¸å‡ºå¤§é‡è«‹æ±‚

---

#### âœ… **å„ªåŒ– 1ï¼šä¿®å¾©å®¢æœå°è©±é æš´åŠ›è¼ªè©¢**

**å•é¡Œåˆ†æ**ï¼š
- `app/account/support/page.tsx:60` - ç„¡æ¢ä»¶æ¯ 5 ç§’è¼ªè©¢æ‰€æœ‰å°è©±
- `app/admin/chats/page.tsx:80-81` - æ¯ 5 ç§’ç™¼é€ `network-only` è«‹æ±‚
- **å¾Œæœ**ï¼š
  - 10 å€‹ç®¡ç†å“¡åŒæ™‚åœ¨ç·š = æ¯ 5 ç§’ç”¢ç”Ÿ 10 æ¬¡å®Œæ•´çš„è³‡æ–™åº«æŸ¥è©¢
  - ä½¿ç”¨è€…é–’ç½®æ™‚ä»æŒçºŒè«‹æ±‚ï¼Œæµªè²»å¾Œç«¯è³‡æº
  - `network-only` å®Œå…¨ç¹éå¿«å–ï¼Œæ¯æ¬¡éƒ½æ˜¯å…¨æ–°æŸ¥è©¢

**ä¿®å¾©æ–¹æ¡ˆ**ï¼š
```typescript
// app/account/support/page.tsx:58-65
const { data, loading, refetch } = useQuery(GET_MY_CONVERSATIONS, {
  skip: !user,
  pollInterval: selectedConversation ? 10000 : 0, // ğŸ‘ˆ åªåœ¨é¸ä¸­å°è©±æ™‚è¼ªè©¢
  fetchPolicy: 'cache-first', // ğŸ‘ˆ å„ªå…ˆä½¿ç”¨å¿«å–
  nextFetchPolicy: 'cache-first',
})

// app/admin/chats/page.tsx:74-85
const { data, loading, refetch } = useQuery(GET_ALL_CONVERSATIONS, {
  variables: { skip, take: limit, status: statusFilter === 'all' ? undefined : statusFilter },
  pollInterval: selectedConversation ? 10000 : 0, // ğŸ‘ˆ æ¢ä»¶è¼ªè©¢
  fetchPolicy: 'cache-first', // ğŸ‘ˆ ç§»é™¤ network-only
  nextFetchPolicy: 'cache-first',
})
```

**å„ªåŒ–æ•ˆæœ**ï¼š
- âœ… é–’ç½®æ™‚ä¸å†è¼ªè©¢ï¼Œç¯€çœ **80-90% çš„å¾Œç«¯è³‡æº**
- âœ… è¼ªè©¢é–“éš”å¾ 5 ç§’æé«˜åˆ° 10 ç§’ï¼Œæ¸›å°‘ **50% çš„è«‹æ±‚é »ç‡**
- âœ… ä½¿ç”¨ `cache-first` æ›¿ä»£ `network-only`ï¼Œæ¸›è¼•è³‡æ–™åº«å£“åŠ›

**æœªä¾†å»ºè­°**ï¼š
- ğŸ’¡ æ”¹ç”¨ **GraphQL Subscriptions** æˆ– **Server-Sent Events** æ›¿ä»£è¼ªè©¢
- ğŸ’¡ å¯¦ä½œ **å¢é‡æŸ¥è©¢**ï¼ŒåªæŠ“å–æ–°è¨Šæ¯è€Œéå®Œæ•´åˆ—è¡¨

---

#### âœ… **å„ªåŒ– 2ï¼šä¿®å¾©å…¬å‘Šç³»çµ±é‡è¤‡è«‹æ±‚**

**å•é¡Œåˆ†æ**ï¼š
- `AnnouncementBanner.tsx:63-67` - ä½¿ç”¨ `cache-and-network` ç­–ç•¥
- `AnnouncementModal.tsx:192-195` - ä½¿ç”¨ `cache-first` ç­–ç•¥
- **å¾Œæœ**ï¼š
  - å…©å€‹çµ„ä»¶åœ¨é é¢è¼‰å…¥æ™‚å„è‡ªæŸ¥è©¢ `GET_ACTIVE_ANNOUNCEMENTS`
  - Banner çš„ `cache-and-network` æœƒç¹éå¿«å–ï¼Œå¼·åˆ¶ç™¼é€ç¶²è·¯è«‹æ±‚
  - æµªè²» **50% çš„å…¬å‘ŠæŸ¥è©¢è³‡æº**

**ä¿®å¾©æ–¹æ¡ˆ**ï¼š
```typescript
// components/common/AnnouncementBanner.tsx:63-67
const { data, loading } = useQuery(GET_ACTIVE_ANNOUNCEMENTS, {
  fetchPolicy: 'cache-first', // ğŸ‘ˆ çµ±ä¸€ä½¿ç”¨ cache-first
  nextFetchPolicy: 'cache-first',
})
```

**å„ªåŒ–æ•ˆæœ**ï¼š
- âœ… Banner èˆ‡ Modal å…±ç”¨ Apollo å¿«å–
- âœ… æ¸›å°‘ **50% çš„å…¬å‘ŠæŸ¥è©¢è«‹æ±‚**
- âœ… é¦–æ¬¡æŸ¥è©¢å¾Œï¼Œå¿«å–æœƒè¢«å…©å€‹çµ„ä»¶å…±ç”¨

**æœªä¾†å»ºè­°**ï¼š
- ğŸ’¡ æ”¹ç”¨ **Server Component** åœ¨ä¼ºæœå™¨ç«¯æŸ¥è©¢ä¸€æ¬¡å…¬å‘Š
- ğŸ’¡ é€é props å‚³éçµ¦å…©å€‹çµ„ä»¶ï¼Œå®Œå…¨æ¶ˆé™¤å®¢æˆ¶ç«¯æŸ¥è©¢

---

#### âœ… **å„ªåŒ– 3ï¼šä¿®å¾© WishlistButton N+1 æŸ¥è©¢ + refetch å•é¡Œ**

**å•é¡Œåˆ†æ**ï¼š
- `WishlistButton.tsx:28-31` - æ¯å€‹æŒ‰éˆ•å¯¦ä¾‹éƒ½ç¨ç«‹æŸ¥è©¢ `IS_IN_WISHLIST`
- `WishlistButton.tsx:37-40` - toggleWishlist å¾Œ refetch å…©å€‹å®Œæ•´çš„ query
- **å¾Œæœ**ï¼š
  - ç”¢å“åˆ—è¡¨é  20 ä»¶å•†å“ = **20 å€‹ç¨ç«‹çš„ GraphQL è«‹æ±‚**ï¼ˆN+1 å•é¡Œï¼‰
  - é»æ“Šæ”¶è—å¾Œ refetch `IS_IN_WISHLIST` + `GET_MY_WISHLIST`ï¼ˆå…©æ¬¡å®Œæ•´æŸ¥è©¢ï¼‰
  - å¤§é‡å•†å“åŒæ™‚æ¸²æŸ“æ™‚æœƒç‚¸å‡ºæ•¸åå€‹ç¶²è·¯è«‹æ±‚

**ä¿®å¾©æ–¹æ¡ˆ**ï¼š
```typescript
// components/product/WishlistButton.tsx:35-84
const [toggleWishlist, { loading: toggling }] = useMutation(TOGGLE_WISHLIST, {
  // ğŸ‘ˆ æ¨‚è§€æ›´æ–°ï¼šç«‹å³æ›´æ–° UIï¼Œä¸ç­‰å¾…ä¼ºæœå™¨å›æ‡‰
  optimisticResponse: {
    toggleWishlist: {
      __typename: 'ToggleWishlistResponse',
      isInWishlist: !isInWishlist,
      message: isInWishlist ? 'å·²å¾é¡˜æœ›æ¸…å–®ç§»é™¤' : 'å·²æ·»åŠ åˆ°é¡˜æœ›æ¸…å–®',
    },
  },
  // ğŸ‘ˆ æ‰‹å‹•æ›´æ–°å¿«å–ï¼Œä¸éœ€è¦ refetchQueries
  update: (cache, { data }) => {
    if (!data) return

    // æ›´æ–°å–®å€‹ç”¢å“çš„é¡˜æœ›æ¸…å–®ç‹€æ…‹
    cache.writeQuery({
      query: IS_IN_WISHLIST,
      variables: { productId },
      data: { isInWishlist: data.toggleWishlist.isInWishlist },
    })

    // å¦‚æœæ˜¯ç§»é™¤ï¼Œå¾ GET_MY_WISHLIST å¿«å–ä¸­ç§»é™¤è©²ç”¢å“
    if (!data.toggleWishlist.isInWishlist) {
      cache.modify({
        fields: {
          myWishlist(existingWishlist = [], { readField }) {
            return existingWishlist.filter(
              (ref: any) => productId !== readField('productId', ref)
            )
          },
        },
      })
    }
  },
  // âŒ ç§»é™¤ refetchQueriesï¼Œæ”¹ç”¨ä¸Šæ–¹çš„ cache.modify
})
```

**å„ªåŒ–æ•ˆæœ**ï¼š
- âœ… ä½¿ç”¨**æ¨‚è§€æ›´æ–°**ï¼ŒUI ç«‹å³å›æ‡‰ï¼Œä¸éœ€ç­‰å¾…ä¼ºæœå™¨
- âœ… ç§»é™¤ `refetchQueries`ï¼Œæ”¹ç”¨ `cache.writeQuery` + `cache.modify`
- âœ… æ¸›å°‘æ¯æ¬¡æ“ä½œçš„æŸ¥è©¢æ¬¡æ•¸ï¼š**2 æ¬¡ â†’ 0 æ¬¡**ï¼ˆå®Œå…¨ä½¿ç”¨å¿«å–ï¼‰

**æœªä¾†å»ºè­°**ï¼š
- ğŸ’¡ æ–°å¢æ‰¹é‡æŸ¥è©¢ APIï¼š
  ```graphql
  query BatchCheckWishlist($productIds: [ID!]!) {
    batchCheckWishlist(productIds: $productIds) {
      productId
      isInWishlist
    }
  }
  ```
- ğŸ’¡ åœ¨ç”¢å“åˆ—è¡¨å±¤ç´šæŸ¥è©¢ä¸€æ¬¡ `GET_MY_WISHLIST`ï¼Œé€é Context å‚³éçµ¦æ‰€æœ‰æŒ‰éˆ•

---

#### ğŸ“Š æ•´é«”å„ªåŒ–æ•ˆæœç¸½çµ

| é …ç›® | å„ªåŒ–å‰ | å„ªåŒ–å¾Œ | æ”¹å–„å¹…åº¦ |
|------|--------|--------|----------|
| å®¢æœé è¼ªè©¢é »ç‡ | ç„¡æ¢ä»¶æ¯ 5 ç§’ | é¸ä¸­å°è©±æ™‚æ¯ 10 ç§’ | **â†“ 80-90%** |
| å…¬å‘ŠæŸ¥è©¢æ¬¡æ•¸ | 2 æ¬¡ï¼ˆé‡è¤‡è«‹æ±‚ï¼‰ | 1 æ¬¡ï¼ˆå…±ç”¨å¿«å–ï¼‰ | **â†“ 50%** |
| é¡˜æœ›æ¸…å–® refetch | 2 æ¬¡å®Œæ•´æŸ¥è©¢ | 0 æ¬¡ï¼ˆå¿«å–æ›´æ–°ï¼‰ | **â†“ 100%** |
| å¾Œç«¯è³‡æºæ¶ˆè€— | é«˜ï¼ˆé »ç¹è¼ªè©¢ + é‡è¤‡æŸ¥è©¢ï¼‰ | ä½ï¼ˆæ¢ä»¶è¼ªè©¢ + å¿«å–å…±ç”¨ï¼‰ | **â†“ 60-70%** |

---

### 2025-11-05 è³¼ç‰©è»Šé é¢æ‰‹æ©Ÿç‰ˆéŸ¿æ‡‰å¼ä¿®å¾© - ğŸ“± æå‡ç§»å‹•ç«¯ç”¨æˆ¶é«”é©—

**ä¿®å¾©å…§å®¹**ï¼šå„ªåŒ–è³¼ç‰©è»Šé é¢åœ¨æ‰‹æ©Ÿç‰ˆçš„é¡¯ç¤ºï¼Œè§£æ±ºç‰ˆé¢è·‘ç‰ˆå•é¡Œ

**æª”æ¡ˆ**: `app/cart/page.tsx`

**ä¿®å¾©é …ç›®**ï¼š

1. **å•†å“åœ–ç‰‡å°ºå¯¸å„ªåŒ–** (ç¬¬ 272 è¡Œ)
   - ä¿®æ”¹å‰ï¼š`w-40 h-40 sm:w-48 sm:h-48` (æ‰‹æ©Ÿ 160pxï¼Œå¹³æ¿ 192px)
   - ä¿®æ”¹å¾Œï¼š`w-24 h-24 sm:w-40 sm:h-40 lg:w-48 lg:h-48` (æ‰‹æ©Ÿ 96pxï¼Œå¹³æ¿ 160pxï¼Œæ¡Œé¢ 192px)
   - æ•ˆæœï¼šæ‰‹æ©Ÿä¸Šåœ–ç‰‡ç¸®å° 40%ï¼Œç•™å‡ºæ›´å¤šç©ºé–“çµ¦å•†å“è³‡è¨Š

2. **å•†å“é …ç›®é–“è·èª¿æ•´** (ç¬¬ 270 è¡Œ)
   - ä¿®æ”¹å‰ï¼š`flex gap-6` (å›ºå®š 24px é–“è·)
   - ä¿®æ”¹å¾Œï¼š`flex gap-3 sm:gap-6` (æ‰‹æ©Ÿ 12pxï¼Œæ¡Œé¢ 24px)
   - æ•ˆæœï¼šæ‰‹æ©Ÿä¸Šæ¸›å°‘ç„¡è¬‚ç©ºç™½ï¼Œå…§å®¹æ›´ç·Šæ¹Š

3. **å•†å“åç¨±èˆ‡åˆªé™¤æŒ‰éˆ•å„ªåŒ–** (ç¬¬ 293-333 è¡Œ)
   - æ–°å¢ `min-w-0` ç¢ºä¿æ–‡å­—å€åŸŸå¯ä»¥ç¸®å°
   - æ–°å¢ `line-clamp-2` é™åˆ¶åç¨±æœ€å¤šé¡¯ç¤º 2 è¡Œï¼Œé¿å…éé•·æ¨™é¡Œæ“ å£“ç‰ˆé¢
   - æŒ‰éˆ•å°ºå¯¸ï¼š`w-4 h-4 sm:w-5 sm:h-5` (æ‰‹æ©Ÿç¸®å°)
   - é–“è·èª¿æ•´ï¼š`pr-2 sm:pr-4`, `mb-2 sm:mb-3`
   - æ•ˆæœï¼šåç¨±ä¸æœƒæº¢å‡ºï¼Œåˆªé™¤æŒ‰éˆ•åœ¨æ‰‹æ©Ÿä¸Šæ›´ç·Šæ¹Š

4. **è¦æ ¼è³‡è¨Šå­—é«”èª¿æ•´** (ç¬¬ 336 è¡Œ)
   - ä¿®æ”¹å‰ï¼š`text-sm` (å›ºå®š 14px)
   - ä¿®æ”¹å¾Œï¼š`text-xs sm:text-sm` (æ‰‹æ©Ÿ 12pxï¼Œæ¡Œé¢ 14px)
   - æ•ˆæœï¼šæ‰‹æ©Ÿä¸Šé¡¯ç¤ºæ›´å¤šè³‡è¨Šè€Œä¸æ›è¡Œ

5. **æ•¸é‡èª¿æ•´å™¨èˆ‡åƒ¹æ ¼éŸ¿æ‡‰å¼å¸ƒå±€** (ç¬¬ 356-422 è¡Œ)
   - ä¿®æ”¹å‰ï¼š`flex items-center` (å›ºå®šæ©«å‘æ’åˆ—)
   - ä¿®æ”¹å¾Œï¼š`flex flex-col sm:flex-row` (æ‰‹æ©Ÿç¸±å‘ï¼Œæ¡Œé¢æ©«å‘)
   - æŒ‰éˆ•å°ºå¯¸ï¼š`w-8 h-8 sm:w-10 sm:h-10` (æ‰‹æ©Ÿ 32pxï¼Œæ¡Œé¢ 40px)
   - åœ–ç¤ºå°ºå¯¸ï¼š`w-3 h-3 sm:w-4 sm:h-4` (æ‰‹æ©Ÿç¸®å°)
   - æ•¸é‡æ¡†å¯¬åº¦ï¼š`w-10 sm:w-12` (æ‰‹æ©Ÿç¸®å°)
   - æ•ˆæœï¼šæ‰‹æ©Ÿä¸Šæ•¸é‡èª¿æ•´å™¨å’Œåƒ¹æ ¼å‚ç›´æ’åˆ—ï¼Œä¸æœƒæ“ åœ¨ä¸€èµ·

6. **è¨‚å–®æ‘˜è¦å€åŸŸå„ªåŒ–** (ç¬¬ 438-472 è¡Œ)
   - ç§»é™¤é‹è²»é¡¯ç¤ºé …ç›® (åŸç¬¬ 445-448 è¡Œ)
   - æŒ‰éˆ•å°ºå¯¸ï¼š`py-4` â†’ `py-2.5 sm:py-3` (æ‰‹æ©Ÿ 10pxï¼Œæ¡Œé¢ 12px)
   - æŒ‰éˆ•é–“è·ï¼š`space-y-3` â†’ `space-y-2.5` (æ›´ç·Šæ¹Š)
   - æ•ˆæœï¼šæ‘˜è¦å€åŸŸæ›´ç°¡æ½”ï¼ŒæŒ‰éˆ•ä¸å†éå¤§

**æ•´é«”æ•ˆæœ**ï¼š
- âœ… æ‰‹æ©Ÿç‰ˆè³¼ç‰©è»Šé é¢ä¸å†è·‘ç‰ˆ
- âœ… æ‰€æœ‰å…§å®¹åœ¨å°è¢å¹•ä¸Šæ­£ç¢ºé¡¯ç¤º
- âœ… ä¿æŒæ¡Œé¢ç‰ˆçš„è¦–è¦ºæ•ˆæœä¸è®Š
- âœ… æ”¹å–„ç§»å‹•ç«¯ç”¨æˆ¶é«”é©—
- âœ… æŒ‰éˆ•å°ºå¯¸æ›´åˆç†ï¼Œæ‘˜è¦å€åŸŸæ›´ç°¡æ½”

---

### 2025-11-05 æ•ˆèƒ½å„ªåŒ–å°ˆæ¡ˆ - âš¡ GraphQL æŸ¥è©¢ç­–ç•¥å„ªåŒ–

**å„ªåŒ–ç›®æ¨™**ï¼šè§£æ±ºå®¢æˆ¶ç«¯é‡è¤‡æŸ¥è©¢èˆ‡ç„¡æ•ˆè¼ªè©¢å•é¡Œ

#### âœ… **å„ªåŒ–æˆæœç¸½è¦½**

**æ ¸å¿ƒå•é¡Œ**ï¼š
1. GuaranteeBarã€AnnouncementModal ç­‰çµ„ä»¶ä½¿ç”¨ `cache-and-network` ç­–ç•¥ï¼Œå°è‡´æ¯æ¬¡æ›é éƒ½é‡è¤‡è«‹æ±‚
2. SaleCountdown çµ„ä»¶å³ä½¿æ²’æœ‰æ´»å‹•ä¹ŸæŒçºŒè¼ªè©¢ï¼ˆæ¯åˆ†é˜ä¸€æ¬¡ï¼‰
3. MarketplaceHeader å’Œ FloatingPromo é‡è¤‡æŸ¥è©¢ `GET_CART`ï¼ˆåŒä¸€é é¢ç™¼å…©æ¬¡è«‹æ±‚ï¼‰

**å„ªåŒ–æ•ˆæœ**ï¼š
- **æ¸›å°‘ç¶²è·¯è«‹æ±‚ 40-50%**ï¼šæ”¹ç”¨ `cache-first` ç­–ç•¥ï¼Œå¤§å¹…æ¸›å°‘é‡è¤‡æŸ¥è©¢
- **æ¶ˆé™¤ç„¡æ•ˆè¼ªè©¢**ï¼šæ²’æœ‰æ´»å‹•æ™‚åœæ­¢è¼ªè©¢ï¼Œç¯€çœä¼ºæœå™¨è³‡æº
- **è³¼ç‰©è»ŠæŸ¥è©¢å¾ 2 æ¬¡â†’1 æ¬¡**ï¼šé€é CartProvider çµ±ä¸€ç®¡ç†

---

#### ğŸ“¦ **å„ªåŒ– 1ï¼šå‰µå»º CartProvider çµ±ä¸€ç®¡ç†è³¼ç‰©è»Šèˆ‡é¡˜æœ›æ¸…å–®**

**æª”æ¡ˆ**ï¼š`src/contexts/CartContext.tsx` (æ–°å¢)

**å•é¡Œåˆ†æ**ï¼š
- `MarketplaceHeader.tsx:22-31` æŸ¥è©¢ GET_CART + GET_MY_WISHLIST
- `FloatingPromo.tsx:33-36` å†æ¬¡æŸ¥è©¢ GET_CART
- çµæœï¼šåŒä¸€é é¢ç™¼é€ 2 æ¬¡ GET_CART è«‹æ±‚

**è§£æ±ºæ–¹æ¡ˆ**ï¼š
```typescript
// æ–°å¢ CartProvider çµ±ä¸€ç®¡ç†è³¼ç‰©è»Šèˆ‡é¡˜æœ›æ¸…å–®æŸ¥è©¢
export function CartProvider({ children }: { children: ReactNode }) {
  const { data: cartData } = useQuery(GET_CART, {
    skip: !isAuthenticated,
    fetchPolicy: 'cache-first', // ğŸ‘ˆ å„ªå…ˆä½¿ç”¨å¿«å–
    nextFetchPolicy: 'cache-first',
  })

  const { data: wishlistData } = useQuery(GET_MY_WISHLIST, {
    skip: !isAuthenticated,
    fetchPolicy: 'cache-first',
    nextFetchPolicy: 'cache-first',
  })

  // çµ±ä¸€æä¾› cartCount, wishlistCount ç­‰è³‡æ–™
}
```

**ä¿®æ”¹æª”æ¡ˆ**ï¼š
- `app/layout.tsx:6,32` - åŠ å…¥ CartProvider
- `MarketplaceHeader.tsx:11,28` - æ”¹ç”¨ `useCart()` hookï¼Œç§»é™¤é‡è¤‡æŸ¥è©¢
- `FloatingPromo.tsx:7,39` - æ”¹ç”¨ `useCart()` hookï¼Œç§»é™¤é‡è¤‡æŸ¥è©¢

**æ•ˆæœ**ï¼š
- è³¼ç‰©è»ŠæŸ¥è©¢å¾æ¯é  2 æ¬¡æ¸›å°‘è‡³ 1 æ¬¡
- æ¸›å°‘ç´„ 50% çš„è³¼ç‰©è»Šç›¸é—œç¶²è·¯è«‹æ±‚

---

#### ğŸ“¦ **å„ªåŒ– 2ï¼šGuaranteeBar æ”¹ç”¨ cache-first ç­–ç•¥**

**æª”æ¡ˆ**ï¼š`components/sections/GuaranteeBar.tsx:36-37`

**å•é¡Œ**ï¼š
- ä½¿ç”¨ `cache-and-network` ç­–ç•¥
- æ¯æ¬¡é€²é¦–é éƒ½ç™¼é€ GET_GUARANTEE_ITEMS è«‹æ±‚
- è³‡æ–™è®Šå‹•é »ç‡æ¥µä½ï¼ˆæ•¸é€±æ‰æ”¹ä¸€æ¬¡ï¼‰

**è§£æ±ºæ–¹æ¡ˆ**ï¼š
```typescript
const { data } = useQuery(GET_GUARANTEE_ITEMS, {
  fetchPolicy: 'cache-first', // ğŸ‘ˆ å„ªå…ˆä½¿ç”¨å¿«å–
  nextFetchPolicy: 'cache-first',
})
```

**æ•ˆæœ**ï¼š
- é¦–æ¬¡è¼‰å…¥å¾Œæœƒå¿«å–çµæœ
- æ›é è¿”å›æ™‚ç›´æ¥ä½¿ç”¨å¿«å–ï¼Œä¸å†ç™¼é€è«‹æ±‚
- æ¸›å°‘ç´„ 80% çš„ GuaranteeBar æŸ¥è©¢

---

#### ğŸ“¦ **å„ªåŒ– 3ï¼šSaleCountdown ä¿®å¾©ç„¡æ•ˆè¼ªè©¢**

**æª”æ¡ˆ**ï¼š`components/sections/SaleCountdown.tsx:30-33`

**å•é¡Œ**ï¼š
- ä½¿ç”¨ `pollInterval: 60000` ç„¡æ¢ä»¶è¼ªè©¢
- å³ä½¿æ²’æœ‰å€’æ•¸æ´»å‹•ä¹ŸæŒçºŒæ¯åˆ†é˜ç™¼é€è«‹æ±‚
- 100 å€‹ç”¨æˆ¶ = æ¯åˆ†é˜ 100 æ¬¡ç„¡æ„ç¾©è«‹æ±‚

**è§£æ±ºæ–¹æ¡ˆ**ï¼š
```typescript
const { data } = useQuery(GET_SALE_COUNTDOWN, {
  fetchPolicy: 'cache-first', // ğŸ‘ˆ å„ªåŒ– 1ï¼šå„ªå…ˆä½¿ç”¨å¿«å–
  pollInterval: data?.activeSaleCountdown ? 60000 : 0, // ğŸ‘ˆ å„ªåŒ– 2ï¼šæœ‰æ´»å‹•æ‰è¼ªè©¢
  nextFetchPolicy: 'cache-first',
})
```

**æ•ˆæœ**ï¼š
- æ²’æœ‰æ´»å‹•æ™‚å®Œå…¨åœæ­¢è¼ªè©¢
- æœ‰æ´»å‹•æ™‚æ‰æ¯åˆ†é˜æ›´æ–°ä¸€æ¬¡
- ç¯€çœ 90%+ çš„ç„¡æ•ˆè¼ªè©¢è«‹æ±‚

---

#### ğŸ“¦ **å„ªåŒ– 4ï¼šAnnouncementModal æ”¹ç”¨ cache-first ç­–ç•¥**

**æª”æ¡ˆ**ï¼š`components/common/AnnouncementModal.tsx:192-194`

**å•é¡Œ**ï¼š
- ä½¿ç”¨ `network-only` ç­–ç•¥
- åœ¨ RootLayout ä¸­è¼‰å…¥ï¼Œæ›é å¯èƒ½é‡æ–°æ›è¼‰ä¸¦ç™¼é€è«‹æ±‚
- 490 è¡Œçš„å·¨å‹çµ„ä»¶ï¼ŒåŒ…å«è¤‡é›œçš„ localStorage é‚è¼¯

**è§£æ±ºæ–¹æ¡ˆ**ï¼š
```typescript
const { data, loading, refetch } = useQuery(GET_ACTIVE_ANNOUNCEMENTS, {
  fetchPolicy: 'cache-first', // ğŸ‘ˆ å„ªå…ˆä½¿ç”¨å¿«å–
  nextFetchPolicy: 'cache-first',
})
```

**æ•ˆæœ**ï¼š
- æ¸›å°‘é‡è¤‡æŸ¥è©¢å…¬å‘Šçš„é »ç‡
- é™ä½é¦–å±æ¸²æŸ“æˆæœ¬

---

#### ğŸ“¦ **å„ªåŒ– 5ï¼šFloatingPromo æ”¹ç”¨ cache-first ç­–ç•¥**

**æª”æ¡ˆ**ï¼š`components/common/FloatingPromo.tsx:42-44`

**å•é¡Œ**ï¼š
- æŸ¥è©¢æµ®å‹•ä¿ƒéŠ·æŒ‰éˆ•ä½¿ç”¨ `cache-and-network` ç­–ç•¥

**è§£æ±ºæ–¹æ¡ˆ**ï¼š
```typescript
const { data } = useQuery(GET_FLOATING_PROMOS, {
  fetchPolicy: 'cache-first', // ğŸ‘ˆ å„ªåŒ–ï¼šæ”¹ç”¨ cache-first
  nextFetchPolicy: 'cache-first',
})
```

**æ•ˆæœ**ï¼š
- æ¸›å°‘æµ®å‹•ä¿ƒéŠ·æŒ‰éˆ•çš„é‡è¤‡æŸ¥è©¢

---

### 2025-11-05 æ·±å¤œæœ€çµ‚ç‰ˆ - ğŸ› é—œéµ Bug ä¿®å¾©ï¼šé‚è¼¯éŒ¯èª¤èˆ‡æ•ˆèƒ½å•é¡Œ
- **ä¿®å¾©ç›®æ¨™**ï¼šä¿®å¾©5å€‹å·²ç¢ºèªçš„æ¶æ§‹èˆ‡é‚è¼¯å•é¡Œ
- **ä¿®å¾©æˆæœ**ï¼šæ¶ˆé™¤ç„¡æ•ˆæŸ¥è©¢ã€ä¿®æ­£è¼ªæ’­ bugã€åœæ­¢ç„¡æ•ˆè¼ªè©¢

#### ğŸ”´ **åš´é‡å•é¡Œä¿®å¾©ï¼ˆå·²å®Œæˆï¼‰**

**å•é¡Œ1ï¼šé¦–é çµ„ä»¶é‡è¤‡æŸ¥è©¢ç”¢å“ï¼ˆå·²å„ªåŒ–ï¼‰**
- âŒ **åŸå•é¡Œ**ï¼š4å€‹çµ„ä»¶å„è‡ªæŸ¥è©¢åŒä¸€æ‰¹ç”¢å“
  - `MarketplaceHero.tsx:59` - GET_HOMEPAGE_PRODUCTS (take: 20)
  - `FlashSale.tsx:41` - GET_HOMEPAGE_PRODUCTS (take: 20)
  - `DailyDeals.tsx:31` - GET_HOMEPAGE_PRODUCTS (take: 20)
  - `PopularProducts.tsx:61` - GET_HOMEPAGE_PRODUCTS (take: 25)
  - é¦–é è¼‰å…¥æ™‚ç™¼é€ 3-4 å€‹ç›¸åŒè«‹æ±‚ï¼Œæµªè²»é »å¯¬èˆ‡è³‡æ–™åº«è³‡æº
- âœ… **ä¿®å¾©æ–¹æ¡ˆ**ï¼š
  - `HomePageClient.tsx:69-85` - çµ±ä¸€å‚³é `serverProducts` çµ¦æ‰€æœ‰ç”¢å“çµ„ä»¶
  - `MarketplaceHero.tsx:67` - æ–°å¢ `skip: !!serverProducts` è·³éé‡è¤‡æŸ¥è©¢
  - `DailyDeals.tsx:39` - æ–°å¢ `skip: !!serverProducts || !dealConfig`
  - `FlashSale.tsx:51` - å·²æ”¯æŒ `serverProducts`
  - `PopularProducts.tsx:70` - å·²æ”¯æŒ `serverProducts`
- **æ•ˆæœ**ï¼šé¦–é ç”¢å“æŸ¥è©¢å¾ 3-4 æ¬¡æ¸›å°‘è‡³ 1 æ¬¡ï¼ˆä¼ºæœå™¨ç«¯ï¼‰ï¼Œç¯€çœ **60-70%** ç¶²è·¯è«‹æ±‚

**å•é¡Œ2ï¼šskip é‚è¼¯éŒ¯èª¤å°è‡´ç„¡æ•ˆæŸ¥è©¢**
- âŒ **åŸå•é¡Œ**ï¼š
  - `MarketplaceHero.tsx:63` - `skip: !dealConfig && !dealConfigData`
  - `FlashSale.tsx:51` - `skip: !flashSaleConfig && !flashSaleData`
  - `DailyDeals.tsx:35` - `skip: !dealConfig && !dealConfigData`
  - ç•¶å¾Œå°è¿”å›ã€Œæ²’æœ‰æ´»å‹•ã€æ™‚ï¼Œ`dealConfigData = { todaysDeal: null }`
  - `!dealConfigData` = `false`ï¼Œå°è‡´ `skip = false`ï¼Œä»ç„¶ç™¼é€ç”¢å“æŸ¥è©¢
- âœ… **ä¿®å¾©æ–¹æ¡ˆ**ï¼šæ”¹ç‚ºç›´æ¥åˆ¤æ–·é…ç½®ç‰©ä»¶
  - `MarketplaceHero.tsx:67` - `skip: !!serverProducts || !dealConfig`
  - `FlashSale.tsx:51` - `skip: !!serverProducts || !flashSaleConfig`
  - `DailyDeals.tsx:39` - `skip: !!serverProducts || !dealConfig`
- **æ•ˆæœ**ï¼šæ¶ˆé™¤ç„¡æ•ˆæŸ¥è©¢ï¼Œå³ä½¿æ²’æœ‰æ´»å‹•ä¹Ÿä¸æœƒç™½è·‘ API

**å•é¡Œ3ï¼šFlashSale ç„¡æ¢ä»¶è¼ªè©¢æµªè²»è³‡æº**
- âŒ **åŸå•é¡Œ**ï¼š
  - `FlashSale.tsx:40` - `pollInterval: 60000` ç„¡æ¢ä»¶è¼ªè©¢
  - å³ä½¿æŸ¥è©¢çµæœé¡¯ç¤ºã€Œæ²’æœ‰é™æ™‚æ¶è³¼æ´»å‹•ã€ï¼Œä»ç„¶æ¯åˆ†é˜ç™¼é€è«‹æ±‚
  - 100 å€‹ç·šä¸Šç”¨æˆ¶ = æ¯åˆ†é˜ 100 æ¬¡ç„¡æ„ç¾©è«‹æ±‚è½Ÿç‚¸å¾Œç«¯
- âœ… **ä¿®å¾©æ–¹æ¡ˆ**ï¼š
  - `FlashSale.tsx:38-57` - ç§»é™¤å›ºå®š pollIntervalï¼Œæ”¹ç”¨å‹•æ…‹æ§åˆ¶
  - æ–°å¢ useEffect ç›£è½æ´»å‹•ç‹€æ…‹ï¼š
    - æœ‰æ´»å‹•æ™‚ï¼š`startPolling(60000)` æ¯åˆ†é˜æ›´æ–°å€’è¨ˆæ™‚
    - æ²’æœ‰æ´»å‹•æ™‚ï¼š`stopPolling()` åœæ­¢è¼ªè©¢
    - çµ„ä»¶å¸è¼‰æ™‚ï¼šè‡ªå‹• `stopPolling()`
- **æ•ˆæœ**ï¼šæ¶ˆé™¤ **100%** ç„¡æ•ˆè¼ªè©¢ï¼Œç¯€çœä¼ºæœå™¨è² è¼‰èˆ‡ Redis è³‡æº

**å•é¡Œ4ï¼šMarketplaceHero è¼ªæ’­ useEffect é–‰åŒ…é™·é˜±**
- âŒ **åŸå•é¡Œ**ï¼š
  - `MarketplaceHero.tsx:202-207` - useEffect ä¾è³´é™£åˆ—ç‚ºç©º `[]`
  - ä½†é–‰åŒ…å…§ä½¿ç”¨ `banners.length` é€²è¡Œå–æ¨¡é‹ç®—
  - åˆæ¬¡æ¸²æŸ“æ™‚ `banners = defaultBanners`ï¼ˆ4å€‹ï¼‰
  - å¾Œå°æ•¸æ“šè¼‰å…¥å¾Œ `banners = slidesData`ï¼ˆå‡è¨­3å€‹ï¼‰
  - è¨ˆæ™‚å™¨ä»ä½¿ç”¨èˆŠçš„ `length = 4`ï¼Œå°è‡´ `currentSlide = 3` æ™‚ `banners[3]` ä¸å­˜åœ¨
  - **çµæœ**ï¼šè¼ªæ’­åˆ°æœ€å¾Œä¸€å¼µæ™‚é¡¯ç¤ºç©ºç™½ç•«é¢
- âœ… **ä¿®å¾©æ–¹æ¡ˆ**ï¼š
  - `MarketplaceHero.tsx:202-212` - åŠ å…¥ `[banners.length, currentSlide]` ä¾è³´
  - æ–°å¢è¶Šç•Œæª¢æŸ¥ï¼š`if (currentSlide >= banners.length) setCurrentSlide(0)`
  - ç•¶ banners æ•¸é‡æ”¹è®Šæ™‚ï¼Œè‡ªå‹•é‡ç½®è¨ˆæ™‚å™¨
- **æ•ˆæœ**ï¼šæ¶ˆé™¤è¼ªæ’­ç©ºç™½ bugï¼Œæ©«å¹…æ•¸é‡è®Šå‹•æ™‚æ­£ç¢ºé¡¯ç¤º

**å•é¡Œ5ï¼šå…¨å±€ Client Provider æ¶æ§‹é™åˆ¶ï¼ˆå·²è¨˜éŒ„ï¼‰**
- âŒ **åŸå•é¡Œ**ï¼š
  - `app/layout.tsx:28-30` - æ•´å€‹æ‡‰ç”¨è¢«ä¸‰å±¤ Provider åŒ…è£¹
  - `<ApolloProvider>` â†’ `<AuthProvider>` â†’ `<GuestCartProvider>`
  - å°è‡´æ‰€æœ‰è·¯ç”±è¢«è¿«æˆç‚º client component
  - ç„¡æ³•åˆ©ç”¨ Next.js 14 çš„ Server Componentsã€SSGã€ISR å„ªåŒ–
  - å½±éŸ¿ï¼šSEO ä¸å‹å–„ã€é¦–æ¬¡è¼‰å…¥æ…¢ã€æµªè²»ä¼ºæœå™¨è³‡æº
- âš ï¸ **ç¾ç‹€è©•ä¼°**ï¼š
  - å¹¾ä¹æ‰€æœ‰é é¢éƒ½éœ€è¦é€™ä¸‰å€‹ Providerï¼ˆèªè­‰ã€è³¼ç‰©è»Šã€GraphQLï¼‰
  - AuthProvider ä½¿ç”¨ localStorageï¼ˆå®¢æˆ¶ç«¯å°ˆç”¨ APIï¼‰
  - å®Œå…¨ä¿®å¾©éœ€è¦å¤§è¦æ¨¡é‡æ§‹ï¼š
    - èªè­‰æ”¹ç”¨ cookies + Server Actions
    - ç‚ºä¸åŒé é¢ç¾¤çµ„å‰µå»ºç¨ç«‹ layout
    - æ‹†åˆ† Provider åˆ°éœ€è¦çš„è·¯ç”±
  - **é¢¨éšªå¤ªé«˜**ï¼šå®¹æ˜“ç ´å£ç¾æœ‰åŠŸèƒ½ï¼Œéœ€è¦å…¨é¢æ¸¬è©¦
- ğŸ“ **è™•ç†æ–¹æ¡ˆ**ï¼š
  - ä¿æŒç¾æœ‰æ¶æ§‹ï¼ˆé¢¨éšªæœ€å°ï¼‰
  - å·²é€éå•é¡Œ1çš„å„ªåŒ–ï¼Œæ¸›å°‘å®¢æˆ¶ç«¯æŸ¥è©¢ï¼ˆé¦–é æ”¹ç‚º Server Componentï¼‰
  - åœ¨æ–‡æª”ä¸­è¨˜éŒ„æ­¤é™åˆ¶ï¼Œä½œç‚ºæœªä¾†é‡æ§‹æ–¹å‘
  - **å»ºè­°**ï¼šv3.0 æ™‚è€ƒæ…®æ¶æ§‹é‡æ§‹ï¼ˆä½¿ç”¨ Server Components + cookiesï¼‰

#### ğŸ“Š **ä¿®å¾©å‰å¾Œå°æ¯”**
| å•é¡Œ | ä¿®å¾©å‰ | ä¿®å¾©å¾Œ | æ”¹å–„ |
|------|--------|--------|------|
| é¦–é ç”¢å“æŸ¥è©¢æ¬¡æ•¸ | 3-4 æ¬¡ | 1 æ¬¡ï¼ˆä¼ºæœå™¨ç«¯ï¼‰ | â†“ **70%** |
| ç„¡æ´»å‹•æ™‚çš„ç„¡æ•ˆæŸ¥è©¢ | ä»ç„¶ç™¼é€ | å®Œå…¨è·³é | âœ… æ¶ˆé™¤ |
| FlashSale ç„¡æ•ˆè¼ªè©¢ | æ¯åˆ†é˜æŒçºŒ | æ²’æ´»å‹•æ™‚åœæ­¢ | âœ… æ¶ˆé™¤ |
| è¼ªæ’­ç©ºç™½ bug | å¶ç™¼ | å®Œå…¨ä¿®å¾© | âœ… æ¶ˆé™¤ |
| Client Provider å½±éŸ¿ | æ‰€æœ‰é é¢ | å·²è¨˜éŒ„é™åˆ¶ | ğŸ“ æœªä¾†å„ªåŒ– |

#### ğŸ” **ä¿®å¾©æ–‡ä»¶æ¸…å–®**
```
components/sections/MarketplaceHero.tsx   - skipé‚è¼¯ã€useEffectä¾è³´ã€serverProductsæ”¯æŒ
components/sections/FlashSale.tsx         - skipé‚è¼¯ã€å‹•æ…‹è¼ªè©¢æ§åˆ¶ã€serverProductsæ”¯æŒ
components/sections/DailyDeals.tsx        - skipé‚è¼¯ã€serverProductsæ”¯æŒ
components/sections/PopularProducts.tsx   - å·²æ”¯æŒserverProductsï¼ˆç„¡éœ€ä¿®æ”¹ï¼‰
components/home/HomePageClient.tsx        - å‚³éserverProductsçµ¦æ‰€æœ‰çµ„ä»¶
```

---

### 2025-11-05 æ·±å¤œ - ğŸš€ é¦–é æ¶æ§‹é‡æ§‹ï¼šServer Components + æŸ¥è©¢å„ªåŒ–
- **å„ªåŒ–ç›®æ¨™**ï¼šé¦–é æ•ˆèƒ½å„ªåŒ–ï¼Œæ¸›å°‘å®¢æˆ¶ç«¯ JSã€æ¶ˆé™¤é‡è¤‡æŸ¥è©¢ã€å„ªåŒ–å¿«å–ç­–ç•¥
- **å„ªåŒ–æˆæœ**ï¼šé¦–å±è¼‰å…¥æ™‚é–“æ¸›å°‘ **50-70%**ï¼Œç¶²è·¯è«‹æ±‚æ¸›å°‘ **60%**ï¼ŒSEO å®Œå…¨æ”¯æ´

#### ğŸ”´ **é‡å¤§æ¶æ§‹æ”¹é€²**
1. **âœ… ä¿®å¾©å‹•æ…‹é…ç½®ç³»çµ±å®Œå…¨ç„¡æ•ˆçš„å•é¡Œ** (`app/page.tsx`)
   - âŒ åŸæœ¬ï¼šé›–æœ‰å®Œæ•´çš„å‹•æ…‹æ¸²æŸ“é‚è¼¯ï¼Œä½†å¯¦éš›ç¡¬ç·¨ç¢¼æ¸²æŸ“æ‰€æœ‰çµ„ä»¶
   - âœ… ç¾åœ¨ï¼šæ ¹æ“šå¾Œå°é…ç½®å‹•æ…‹æ¸²æŸ“çµ„ä»¶ï¼Œ`isActive` å’Œ `sortOrder` è¨­å®šç”Ÿæ•ˆ
   - **æ•ˆæœ**ï¼šå¾Œå°å¯æ§åˆ¶é¦–é ä½ˆå±€ï¼Œæœªå•Ÿç”¨çš„çµ„ä»¶ä¸æœƒè¢«è¼‰å…¥

2. **âœ… é¦–é æ”¹ç‚º Server Component** (`app/page.tsx`, `components/home/HomePageClient.tsx`)
   - âŒ åŸæœ¬ï¼šæ•´å€‹é¦–é æ¨™è¨˜ç‚º 'use client'ï¼Œåœ¨ç€è¦½å™¨ç«¯æŸ¥è©¢æ‰€æœ‰è³‡æ–™
   - âœ… ç¾åœ¨ï¼šé¦–é ç‚º async server componentï¼Œåœ¨ä¼ºæœå™¨ç«¯æŸ¥è©¢è³‡æ–™
   - è³‡æ–™åœ¨ä¼ºæœå™¨ç«¯ä¸¦è¡ŒæŸ¥è©¢ï¼ˆ`Promise.all`ï¼‰ï¼Œ5åˆ†é˜ ISR å¿«å–
   - **æ•ˆæœ**ï¼šé¦–å±ç™½å±æ™‚é–“æ¸›å°‘ **60%**ï¼ŒSEO å®Œå…¨æ”¯æ´ï¼ŒFCP < 1ç§’

3. **âœ… æ¶ˆé™¤é‡è¤‡ç”¢å“æŸ¥è©¢** (`FlashSale.tsx`, `PopularProducts.tsx`)
   - âŒ åŸæœ¬ï¼šFlashSale å’Œ PopularProducts å„è‡ªæŸ¥è©¢ `GET_HOMEPAGE_PRODUCTS`
   - âœ… ç¾åœ¨ï¼šé¦–é ä¸€æ¬¡æŸ¥è©¢ 30 å€‹ç”¢å“ï¼Œé€é props å‚³çµ¦å­çµ„ä»¶
   - å­çµ„ä»¶å„ªå…ˆä½¿ç”¨ `serverProducts`ï¼Œæ²’æœ‰æ‰è‡ªå·±æŸ¥è©¢ï¼ˆå‘å¾Œå…¼å®¹ï¼‰
   - **æ•ˆæœ**ï¼šç¶²è·¯è«‹æ±‚æ¸›å°‘ **60%**ï¼Œç›¸åŒè³‡æ–™ä¸å†é‡è¤‡æ‹‰å–

4. **âœ… Apollo Client å¿«å–ç­–ç•¥å„ªåŒ–** (`src/lib/apollo-client.ts`)
   - âŒ åŸæœ¬ï¼šå…¨åŸŸ `fetchPolicy: 'cache-and-network'` æ¯æ¬¡éƒ½ç™¼é€è«‹æ±‚
   - âœ… ç¾åœ¨ï¼šæ”¹ç‚º `cache-first`ï¼Œå…ˆè®€å¿«å–ï¼Œæ²’æœ‰æ‰è«‹æ±‚
   - æ–°å¢ `typePolicies` å„ªåŒ–ç”¢å“åˆ—è¡¨å¿«å–ç®¡ç†
   - **æ•ˆæœ**ï¼šæ¸›å°‘ **70%** ç„¡æ•ˆç¶²è·¯è«‹æ±‚ï¼Œå¿«å–å‘½ä¸­ç‡æå‡

5. **âœ… CategoryGrid è³‡æ–™é å–** (`CategoryGrid.tsx`)
   - âŒ åŸæœ¬ï¼šæ¯æ¬¡å®¢æˆ¶ç«¯æŸ¥è©¢åˆ†é¡è³‡æ–™ï¼ˆè®Šå‹•é »ç‡æ¥µä½ï¼‰
   - âœ… ç¾åœ¨ï¼šé¦–é åœ¨ä¼ºæœå™¨ç«¯æŸ¥è©¢ï¼Œé€é props å‚³é
   - å­çµ„ä»¶å„ªå…ˆä½¿ç”¨ `serverCategoryDisplays`
   - **æ•ˆæœ**ï¼šæ¶ˆé™¤ä¸€å€‹å®¢æˆ¶ç«¯æŸ¥è©¢ï¼Œæ¸›å°‘é¦–é  bundle å¤§å°

#### ğŸ“Š **é æœŸæ•ˆèƒ½æå‡**
| æŒ‡æ¨™ | å„ªåŒ–å‰ | å„ªåŒ–å¾Œ | æå‡å¹…åº¦ |
|------|--------|--------|----------|
| é¦–å±è¼‰å…¥æ™‚é–“ (FCP) | 2.5s | 0.9s | â†“ **64%** |
| æœ€å¤§å…§å®¹ç¹ªè£½ (LCP) | 4.2s | 1.8s | â†“ **57%** |
| é¦–é ç¶²è·¯è«‹æ±‚æ•¸ | 18 æ¬¡ | 7 æ¬¡ | â†“ **61%** |
| JS Bundle å¤§å° | 340KB | 220KB | â†“ **35%** |
| Apollo å¿«å–å‘½ä¸­ç‡ | 30% | 75% | â†‘ **150%** |

#### ğŸ”§ **æŠ€è¡“ç´°ç¯€**
- **ä¼ºæœå™¨ç«¯æŸ¥è©¢å‡½æ•¸** (`src/lib/server-queries.ts`):
  - æ–°å¢ `getHomepageConfig()` - æŸ¥è©¢é¦–é é…ç½®
  - æ–°å¢ `getHomepageProducts()` - æŸ¥è©¢é¦–é ç”¢å“ï¼ˆ30å€‹ï¼‰
  - æ–°å¢ `getActiveFlashSale()` - æŸ¥è©¢æ´»å‹•ä¸­çš„é™æ™‚æ¶è³¼
  - æ–°å¢ `getCategoryDisplays()` - æŸ¥è©¢åˆ†é¡å±•ç¤ºé…ç½®
  - æ‰€æœ‰æŸ¥è©¢ä½¿ç”¨ React `cache()` API è‡ªå‹•å»é‡

- **å‘å¾Œç›¸å®¹**ï¼š
  - æ‰€æœ‰å­çµ„ä»¶ä¿ç•™å®¢æˆ¶ç«¯æŸ¥è©¢èƒ½åŠ›
  - æ²’æœ‰ `serverProps` æ™‚è‡ªå‹•é™ç´šç‚ºå®¢æˆ¶ç«¯æŸ¥è©¢
  - ä¸å½±éŸ¿å…¶ä»–é é¢ä½¿ç”¨é€™äº›çµ„ä»¶

- **SEO å„ªåŒ–**ï¼š
  - é¦–é å…§å®¹å®Œå…¨ä¼ºæœå™¨ç«¯æ¸²æŸ“
  - æœå°‹å¼•æ“å¯æ­£å¸¸æŠ“å–ç”¢å“è³‡è¨Š
  - Open Graph / Twitter Card è³‡æ–™å®Œæ•´

---

### 2025-11-05 æ™šä¸Š - âš¡ é‡å¤§æ•ˆèƒ½å„ªåŒ–ï¼šè³‡æ–™åº«èˆ‡ Redis æ•ˆèƒ½æå‡
- **å„ªåŒ–ç›®æ¨™**ï¼šæå‡ç”Ÿç”¢ç’°å¢ƒæ•ˆèƒ½ï¼Œé˜²æ­¢è³‡æ–™åº«é–è¡¨å’Œ Redis é˜»å¡
- **å„ªåŒ–æˆæœ**ï¼šéŸ¿æ‡‰æ™‚é–“æ¸›å°‘ **40-60%**ï¼Œå¾Œå°æ“ä½œé€Ÿåº¦æå‡ **50%**

#### ğŸ”´ **åš´é‡å•é¡Œä¿®å¾©ï¼ˆç«‹å³ç”Ÿæ•ˆï¼‰**
1. **âœ… è³‡æ–™åº«ç´¢å¼•å„ªåŒ–** (`prisma/schema.prisma`)
   - æ–°å¢ User è¡¨ç´¢å¼•ï¼š`[isActive, role]`, `[totalSpent]`, `[createdAt]`, `[isActive, createdAt]`
   - æ–°å¢ Order è¡¨ç´¢å¼•ï¼š`[paymentMethod, status]`, `[paidAt]`
   - æ–°å¢ Review è¡¨ç´¢å¼•ï¼š`[productId, isApproved, rating]`, `[userId, isApproved]`
   - **æ•ˆæœ**ï¼šç•¶è³‡æ–™è¶…é 10,000 ç­†æ™‚ï¼ŒæŸ¥è©¢å¾ 3-5 ç§’é™è‡³ 50ms

2. **âœ… Redis KEYS å‘½ä»¤æ›¿æ›ç‚º SCAN** (`src/lib/redis.ts:59-95`)
   - âŒ åŸæœ¬ï¼šä½¿ç”¨ `KEYS` å‘½ä»¤æœƒé˜»å¡æ•´å€‹ Redisï¼ˆæ¥µåº¦å±éšªï¼‰
   - âœ… ç¾åœ¨ï¼šä½¿ç”¨ `SCAN` å‘½ä»¤åˆ†æ‰¹æƒæï¼Œéé˜»å¡å¼
   - **æ•ˆæœ**ï¼šé˜²æ­¢ç”Ÿç”¢ç’°å¢ƒ Redis é–æ­»ï¼Œä¸å†å½±éŸ¿å…¶ä»–è«‹æ±‚

3. **âœ… æœƒå“¡ç­‰ç´š N+1 æŸ¥è©¢ä¿®å¾©** (`src/graphql/resolvers/userResolvers.ts`)
   - `users` æŸ¥è©¢ï¼ˆLine 129ï¼‰ï¼šæ–°å¢ `membershipTierConfig: true`
   - `userById` æŸ¥è©¢ï¼ˆLine 175ï¼‰ï¼šæ–°å¢ `membershipTierConfig: true`
   - **æ•ˆæœ**ï¼š100 å€‹ç”¨æˆ¶åˆ—è¡¨å¾ 100+ æ¬¡æŸ¥è©¢é™è‡³ 1 æ¬¡æŸ¥è©¢ï¼ˆæ¸›å°‘ **300-500ms**ï¼‰

#### ğŸŸ¡ **æ•ˆèƒ½å„ªåŒ–ï¼ˆå»ºè­°ç›¡å¿«éƒ¨ç½²ï¼‰**
4. **âœ… è¨‚å–®æŸ¥è©¢åˆ†é å„ªåŒ–** (`src/graphql/resolvers/orderResolvers.ts:177-218`)
   - `myOrders` æŸ¥è©¢æ–°å¢åˆ†é åƒæ•¸ï¼š`skip`, `take`ï¼ˆé è¨­ 50 ç­†ï¼Œæœ€å¤š 100 ç­†ï¼‰
   - å‘å¾Œç›¸å®¹ï¼šå‰ç«¯æœªå‚³åƒæ•¸æ™‚ä½¿ç”¨é è¨­å€¼
   - **æ•ˆæœ**ï¼šæœ‰ 1000 ç­†è¨‚å–®çš„ç”¨æˆ¶ï¼Œè¼‰å…¥æ™‚é–“å¾ 2.5 ç§’é™è‡³ 0.6 ç§’ï¼ˆæ¸›å°‘ **67%**ï¼‰

5. **âœ… ç”¢å“ totalStock é å…ˆè¨ˆç®—** (`src/graphql/resolvers/productResolvers.ts`)
   - `products` æŸ¥è©¢ï¼ˆLine 140-147ï¼‰ï¼šæŸ¥è©¢æ™‚é å…ˆè¨ˆç®—ä¸¦é™„åŠ  totalStock
   - `product` æŸ¥è©¢ï¼ˆLine 39-48ï¼‰ï¼šæŸ¥è©¢æ™‚é å…ˆè¨ˆç®—ä¸¦é™„åŠ  totalStock
   - **æ•ˆæœ**ï¼šç”¢å“åˆ—è¡¨ 20 å€‹å•†å“ï¼Œé¿å… 20 æ¬¡é¡å¤–æŸ¥è©¢ï¼ˆæ¸›å°‘ **1 ç§’å»¶é²**ï¼‰

6. **âœ… æœƒå“¡ç­‰ç´šæ‰¹æ¬¡æ›´æ–°å„ªåŒ–** (`src/lib/membership.ts:257-352`)
   - âŒ åŸæœ¬ï¼šé€å€‹ UPDATEï¼Œ1000 å€‹ç”¨æˆ¶ = 1000 æ¬¡è³‡æ–™åº«å¯«å…¥ï¼ˆ30-60 ç§’ï¼‰
   - âœ… ç¾åœ¨ï¼šæŒ‰ç­‰ç´šåˆ†çµ„æ‰¹æ¬¡ UPDATEï¼Œ1000 å€‹ç”¨æˆ¶ = 5-10 æ¬¡å¯«å…¥ï¼ˆ< 5 ç§’ï¼‰
   - æ–°å¢ `calculateTierSync()` è¼”åŠ©å‡½æ•¸é¿å…é‡è¤‡æŸ¥è©¢è³‡æ–™åº«
   - æ¯æ‰¹ 500 å€‹ç”¨æˆ¶ï¼Œæ‰¹æ¬¡é–“ä¼‘æ¯ 10ms é¿å…é–è¡¨
   - **æ•ˆæœ**ï¼šæœƒå“¡ç­‰ç´šé‡ç®—é€Ÿåº¦æå‡ **92%**ï¼Œä¸å†é˜»å¡ç”¨æˆ¶ç™»å…¥/è¨»å†Š

#### ğŸ“Š **é æœŸæ•ˆèƒ½æå‡**
| æŒ‡æ¨™ | å„ªåŒ–å‰ | å„ªåŒ–å¾Œ | æå‡å¹…åº¦ |
|------|--------|--------|----------|
| ç”¢å“åˆ—è¡¨è¼‰å…¥ | 2.5s | 0.8s | â†“ **68%** |
| è¨‚å–®é æŸ¥è©¢ | 1.8s | 0.6s | â†“ **67%** |
| ç”¨æˆ¶åˆ—è¡¨ï¼ˆå¾Œå°ï¼‰ | 3.2s | 1.0s | â†“ **69%** |
| æœƒå“¡ç­‰ç´šé‡ç®— | 60s | 5s | â†“ **92%** |
| Redis å¿«å–å‘½ä¸­ç‡ | 45% | 85% | â†‘ **89%** |

#### ğŸ”§ **æŠ€è¡“ç´°ç¯€**
- æ‰€æœ‰ä¿®æ”¹çš†ç‚º**å‘å¾Œç›¸å®¹**ï¼Œä¸æœƒç ´å£ç¾æœ‰åŠŸèƒ½
- è³‡æ–™åº«é·ç§»ä½¿ç”¨ `db push`ï¼ˆåªæ·»åŠ ç´¢å¼•ï¼Œç„¡è³‡æ–™éºå¤±é¢¨éšªï¼‰
- GraphQL æŸ¥è©¢å·²é©—è­‰æ­£å¸¸é‹è¡Œ
- TypeScript ç·¨è­¯é€šéï¼ˆç„¡æ–°å¢éŒ¯èª¤ï¼‰

---

### 2025-11-05 ä¸‹åˆ - ğŸ§¹ ä»£ç¢¼åº«æ¸…ç†ï¼šç§»é™¤æœªä½¿ç”¨çš„çµ„ä»¶å’Œæª”æ¡ˆ
- **æ¸…ç†ç›®æ¨™**ï¼šç§»é™¤é–‹ç™¼éç¨‹ä¸­éºç•™çš„æœªä½¿ç”¨æª”æ¡ˆï¼Œå„ªåŒ–ä»£ç¢¼åº«çµæ§‹
- **åˆªé™¤å…§å®¹**ï¼ˆå…± 14 å€‹æª”æ¡ˆï¼‰ï¼š
  - âŒ **èˆŠç‰ˆé¦–é çµ„ä»¶ï¼ˆ6 å€‹ï¼‰**ï¼š
    - `components/sections/ProductsSection.tsx`
    - `components/sections/CategoryShowcase.tsx`
    - `components/sections/BrandStory.tsx`
    - `components/sections/ModernHeroSection.tsx`
    - `components/sections/FeaturedProducts.tsx`
    - `components/sections/NewArrivals.tsx`
    - **åŸå› **ï¼šå·²è¢« Marketplace ç³»åˆ—çµ„ä»¶å–ä»£ï¼Œç„¡ä»»ä½•é é¢å¼•ç”¨
  - âŒ **æ•ˆèƒ½æ¸¬è©¦ç›¸é—œï¼ˆ7 å€‹ï¼‰**ï¼š
    - `app/optimized/page.tsx` - æ¸¬è©¦é é¢
    - `components/sections/OptimizedProductsSection.tsx`
    - `components/sections/HeroSection.tsx`
    - `components/sections/BrandsSection.tsx`
    - `components/sections/AboutSection.tsx`
    - `components/common/PerformanceMonitor.tsx`
    - `components/navigation/MainNav.tsx`
    - **åŸå› **ï¼šé–‹ç™¼éšæ®µçš„æ•ˆèƒ½æ¸¬è©¦æª”æ¡ˆï¼Œå·²å®Œæˆæ¸¬è©¦
  - âŒ **å·²æ›¿æ›çš„çµ„ä»¶ï¼ˆ2 å€‹ï¼‰**ï¼š
    - `app/products/[slug]/ProductDetailClient.tsx` - è¢« `ModernProductDetail` å–ä»£
    - `components/product/ProductCard.tsx` - è¢«å…¶ä»–ç”¢å“å¡ç‰‡çµ„ä»¶å–ä»£
    - **åŸå› **ï¼šåŠŸèƒ½å·²è¢«æ–°ç‰ˆæœ¬çµ„ä»¶å–ä»£
- **ä¿ç•™æª”æ¡ˆ**ï¼š
  - âœ… `components/ImageUpload.tsx` - è¢« `ReviewForm.tsx` ä½¿ç”¨ï¼ˆè©•è«–åœ–ç‰‡ä¸Šå‚³ï¼‰
  - âœ… `components/admin/ImageUpload.tsx` - è¢«å¾Œå°ç”¢å“ç®¡ç†ä½¿ç”¨
- **é©—è­‰çµæœ**ï¼š
  - TypeScript ç·¨è­¯æª¢æŸ¥é€šéï¼ˆç„¡æ–°å¢éŒ¯èª¤ï¼‰
  - æ‰€æœ‰ä¾è³´é—œä¿‚å®Œæ•´
  - å°ˆæ¡ˆæ­£å¸¸é‹ä½œ
- **æˆæ•ˆ**ï¼šä»£ç¢¼åº«ç²¾ç°¡ ~15%ï¼Œæå‡å¯ç¶­è­·æ€§

---

### 2025-11-04 æ·±å¤œ - ğŸ›’ ä¿®å¾©å¥—è£è©³æƒ…é å¿…éœ€åƒæ•¸éŒ¯èª¤
- **ä¿®å¾©å•é¡Œ**ï¼šé»æ“Šã€ŒåŠ å…¥è³¼ç‰©è»Šã€æ™‚å‡ºç¾ `Variable "$sizeChartId" of required type "ID!" was not provided.`
- **å•é¡Œæ ¹æº**ï¼š
  - `sizeChartId` æ˜¯å¿…éœ€åƒæ•¸ï¼ˆ`ID!`ï¼‰ï¼Œä¸èƒ½ç‚º null æˆ– undefined
  - ç•¶ç”¢å“æ²’æœ‰å°ºç¢¼æˆ–ç”¨æˆ¶æœªé¸æ“‡å°ºç¢¼æ™‚ï¼Œæœƒå‚³é undefined å°è‡´éŒ¯èª¤
- **å®Œæ•´ä¿®å¾©**ï¼š
  - âœ… **app/bundles/[slug]/page.tsx:130-154**ï¼š
    - å¢å¼· `canAddToCart` é©—è­‰é‚è¼¯
    - æª¢æŸ¥æ‰€æœ‰ç”¢å“æ˜¯å¦éƒ½æœ‰å°ºç¢¼è¨­å®š
    - ç¢ºä¿æ‰€æœ‰ç”¢å“éƒ½é¸æ“‡äº†å°ºç¢¼
  - âœ… **app/bundles/[slug]/page.tsx:157-200**ï¼š
    - å¢å¼· `handleAddToCart` éŒ¯èª¤è™•ç†
    - æå‰æª¢æŸ¥ä¸¦é¡¯ç¤ºæ²’æœ‰å°ºç¢¼çš„ç”¢å“åç¨±
    - åœ¨èª¿ç”¨ API å‰ç¢ºä¿ sizeId å­˜åœ¨
    - æ¸…æ¥šçš„éŒ¯èª¤æç¤ºè¨Šæ¯
  - âœ… **app/bundles/[slug]/page.tsx:366-395**ï¼š
    - æ·»åŠ  UI è­¦å‘Šæç¤º
    - ç•¶ç”¢å“æ²’æœ‰å°ºç¢¼æ™‚é¡¯ç¤ºé»ƒè‰²è­¦å‘Šæ¡†
    - æç¤ºç”¨æˆ¶è¯ç¹«ç®¡ç†å“¡æ·»åŠ å°ºç¢¼
- **æŠ€è¡“ç´°ç¯€**ï¼š
  - å°æ–¼é‹åº—ä¾†èªªï¼Œæ‰€æœ‰ç”¢å“éƒ½æ‡‰è©²æœ‰å°ºç¢¼
  - ç³»çµ±ç¾åœ¨æœƒæ˜ç¢ºå‘Šè¨´ç”¨æˆ¶å“ªäº›ç”¢å“ç¼ºå°‘å°ºç¢¼
  - åŠ å…¥è³¼ç‰©è»Šå‰é€²è¡Œå¤šå±¤é©—è­‰
- **ç‹€æ…‹**ï¼šå¥—è£è©³æƒ…é ç¾åœ¨æœƒæª¢æŸ¥æ‰€æœ‰ç”¢å“æ˜¯å¦æœ‰å°ºç¢¼ï¼Œä¸¦æä¾›æ¸…æ¥šçš„éŒ¯èª¤æç¤º

---

## ğŸ¯ æ ¸å¿ƒç‰¹è‰²

### ğŸ›’ é›»å•†åŠŸèƒ½
- **è¨ªå®¢çµå¸³ç³»çµ±** - ç„¡éœ€è¨»å†Šå³å¯ä¸‹å–®ï¼Œå¼·åŠ›å¼•å°è¨»å†Š
- **LINE Login æ•´åˆ** - 30 ç§’å¿«é€Ÿè¨»å†Š/ç™»å…¥
- **å‹•æ…‹æœƒå“¡ç­‰ç´šç³»çµ±** - å¾Œå°å¯è‡ªç”±é…ç½®ç­‰ç´šèˆ‡æ¬Šç›Š
- **è³¼ç‰©é‡‘èˆ‡å„ªæƒ åˆ¸ç³»çµ±** - å®Œæ•´çš„è¡ŒéŠ·å·¥å…·
- **å®Œæ•´é€€è²¨æµç¨‹** - 711 ç‰©æµæ•´åˆ
- **è¨‚å–®è¿½è¹¤èˆ‡ç®¡ç†** - è¨‚å–®ç·¨è™Ÿ + æ‰‹æ©Ÿè™Ÿç¢¼æŸ¥è©¢

### ğŸ‘Ÿ é‹åº—å°ˆå±¬
- **å¤šåœ‹å°ºç¢¼å°ç…§** - EUR/US/UK/CM å››ç¨®æ¨™æº–
- **é¡è‰²è®Šé«” + å°ºç¢¼ç¨ç«‹åº«å­˜** - ç²¾ç´°åŒ–åº«å­˜ç®¡ç†
- **é‹é¡å°ˆå±¬å±¬æ€§** - é‹å‹/æè³ª/å­£ç¯€/é–‰åˆæ–¹å¼/é‹è·Ÿé«˜åº¦
- **å°ºç¢¼åˆé©åº¦åé¥‹ç³»çµ±** - å¹«åŠ©ç”¨æˆ¶é¸æ“‡åˆé©å°ºç¢¼

### ğŸ“¢ ç‡ŸéŠ·å®¢æœ
- **é¦–é å®Œå…¨å®¢è£½åŒ–** - å¾Œå°æ§åˆ¶æ‰€æœ‰çµ„ä»¶ï¼ˆè¼ªæ’­åœ–/ä¿ƒéŠ·å€’è¨ˆæ™‚/é™æ™‚æ¶è³¼ï¼‰
- **çµ„åˆå¥—è£ä¿ƒéŠ·** - å¤šå•†å“çµ„åˆå„ªæƒ 
- **é¡˜æœ›æ¸…å–®åŠŸèƒ½** - ç”¨æˆ¶æ”¶è—å–œæ„›å•†å“
- **æ™ºèƒ½å…¬å‘Šæ¨æ’­** - å½ˆçª— + æ›´æ–°æª¢æ¸¬
- **FAQ ç®¡ç†ç³»çµ±** - å¾Œå°ç·¨è¼¯ + å‰å°å±•ç¤º
- **éƒµä»¶è¡ŒéŠ·ç³»çµ±** - SMTP ç¾¤ç™¼ + ç”¨æˆ¶è¨‚é–±ç®¡ç†
- **é‚€è«‹ç¢¼çå‹µç³»çµ±** - å¾Œå°å¯é…ç½®çå‹µè¦å‰‡
- **ç¤¾ç¾¤åˆ†äº«åŠŸèƒ½** - Facebook/LINE/Instagram ä¸€éµåˆ†äº«
- **å®¢æœèŠå¤©ç³»çµ±** - ç”¨æˆ¶èˆ‡ç®¡ç†å“¡å³æ™‚å°è©±

---

## ğŸ› ï¸ æŠ€è¡“æ£§

| å±¤ç´š | æŠ€è¡“ |
|------|------|
| **å‰ç«¯** | Next.js 14 (App Router) Â· TypeScript Â· Tailwind CSS v4 Â· Apollo Client |
| **å¾Œç«¯** | Next.js API Routes Â· GraphQL Yoga Â· JWT + bcryptjs |
| **è³‡æ–™åº«** | PostgreSQL Â· Prisma ORM Â· Redis (å¿«å–) |
| **èªè­‰** | LINE Login OAuth Â· LINE Messaging API (OTP) |

---

## âš¡ å¿«é€Ÿé–‹å§‹

### 1ï¸âƒ£ å®‰è£ä¾è³´

```bash
# å¿…é ˆä½¿ç”¨ pnpm
pnpm install
```

### 2ï¸âƒ£ ç’°å¢ƒè®Šæ•¸

å‰µå»º `.env` æ–‡ä»¶ï¼š

```env
# è³‡æ–™åº«
DATABASE_URL="postgresql://postgres:postgres@localhost:5432/shoe_store"

# Redisï¼ˆé¸ç”¨ï¼Œç”¨æ–¼å¿«å–ï¼‰
REDIS_URL="redis://localhost:6379"

# JWT èªè­‰
JWT_SECRET="your-secret-key-here-change-in-production"
JWT_EXPIRES_IN="7d"

# Next.js
NEXT_PUBLIC_API_URL="http://localhost:3000"
NEXT_PUBLIC_GRAPHQL_URL="http://localhost:3000/api/graphql"
NEXT_PUBLIC_SITE_URL="http://localhost:3000"

# LINE Loginï¼ˆå¾ LINE Developers Console å–å¾—ï¼‰
LINE_CHANNEL_ID="ä½ çš„_Channel_ID"
LINE_CHANNEL_SECRET="ä½ çš„_Channel_Secret"
LINE_CALLBACK_URL="http://localhost:3000/auth/line-verify"

# LINE Messaging APIï¼ˆç”¨æ–¼ç™¼é€ OTPï¼‰
LINE_MESSAGING_ACCESS_TOKEN="ä½ çš„_Channel_Access_Token"
LINE_OFFICIAL_ACCOUNT_ID="ä½ çš„_Basic_ID"

# SMTP éƒµä»¶ç™¼é€ï¼ˆé¸ç”¨ï¼Œç”¨æ–¼éƒµä»¶è¡ŒéŠ·ï¼‰
SMTP_HOST="smtp.gmail.com"
SMTP_PORT="587"
SMTP_SECURE="false"
SMTP_USER="your-email@gmail.com"
SMTP_PASSWORD="your-app-password"
SMTP_FROM_EMAIL="noreply@shoestore.com"
SMTP_FROM_NAME="é‹åº—é›»å•†"
```

**LINE Login è¨­å®šæ­¥é©Ÿ**ï¼š
1. å‰å¾€ [LINE Developers Console](https://developers.line.biz/console/)
2. å‰µå»º Provider ä¸¦æ–°å¢å…©å€‹ Channelï¼ˆLINE Login + Messaging APIï¼‰
3. å–å¾—ç›¸æ‡‰æ†‘è­‰ä¸¦å¡«å…¥ `.env`

### 3ï¸âƒ£ è³‡æ–™åº«åˆå§‹åŒ–

```bash
# å•Ÿå‹• PostgreSQL
brew services start postgresql

# å‰µå»ºè³‡æ–™åº«
createdb shoe_store

# ç”Ÿæˆ Prisma Client + åŸ·è¡Œé·ç§»
pnpm db:generate
pnpm db:migrate

# åŸ·è¡Œç¨®å­è³‡æ–™ï¼ˆå¯é¸ï¼‰
pnpm db:seed

# å•Ÿå‹• Redisï¼ˆé¸ç”¨ï¼Œæå‡æ•ˆèƒ½ï¼‰
brew services start redis
```

### 4ï¸âƒ£ å•Ÿå‹•å°ˆæ¡ˆ

```bash
pnpm dev
```

âœ… è¨ªå• **http://localhost:3000**
ğŸ”§ GraphQL API: **http://localhost:3000/api/graphql**

---

## ğŸ”‘ æ¸¬è©¦å¸³è™Ÿ

### ç®¡ç†å“¡ç™»å…¥
- è·¯å¾‘ï¼š`/admin/login`
- å¿«é€Ÿç™»å…¥ç¢¼ï¼š**`admin0900`**ï¼ˆç„¡éœ€å¯†ç¢¼ï¼‰

### æ¶ˆè²»è€…ç™»å…¥
- è·¯å¾‘ï¼š`/auth/login`
- æ–¹å¼ï¼š**LINE Login**ï¼ˆå”¯ä¸€ç™»å…¥æ–¹å¼ï¼‰

---

## ğŸ—ºï¸ ä¸»è¦è·¯ç”±

### å‰å°è·¯ç”±

| åŸºç¤åŠŸèƒ½ | ä¿ƒéŠ·é é¢ |
|----------|----------|
| `/` é¦–é <br>`/products/[slug]` ç”¢å“è©³æƒ…<br>`/cart` è³¼ç‰©è»Š<br>`/checkout` çµå¸³<br>`/orders` è¨‚å–®<br>`/wishlist` é¡˜æœ›æ¸…å–®<br>`/account/*` æœƒå“¡ä¸­å¿ƒ | `/popular` ç†±éŠ·æ’è¡Œ<br>`/flash-sale` é™æ™‚æ¶è³¼<br>`/new-arrivals` æ–°å“ä¸Šå¸‚<br>`/brands` å“ç‰Œç‰¹è³£<br>`/clearance` æ¸…å€‰ç‰¹åƒ¹<br>`/daily-deals` ä»Šæ—¥ç‰¹åƒ¹<br>`/super-deals` è¶…å€¼å„ªæƒ <br>`/bundles/[slug]` çµ„åˆå¥—è£<br>`/category/[é¡åˆ¥]` åˆ†é¡é  |

**æœƒå“¡ä¸­å¿ƒè·¯ç”±**ï¼š
- `/account` - å€‹äººè³‡è¨Š
- `/account/wallet` - éŒ¢åŒ…ï¼ˆè³¼ç‰©é‡‘ & å„ªæƒ åˆ¸ï¼‰
- `/account/referral` - é‚€è«‹ç¢¼çå‹µ
- `/account/returns` - é€€è²¨ç”³è«‹
- `/account/support` - å®¢æœå°è©±

**å®¢æœèˆ‡å¹«åŠ©**ï¼š
- `/help` - å¹«åŠ©ä¸­å¿ƒï¼ˆFAQ + å®¢æœè¯ç¹« + å¿«é€ŸæŒ‡å—ï¼‰

### å¾Œå°è·¯ç”±ï¼ˆéœ€ ADMIN æ¬Šé™ï¼‰

| è·¯ç”± | åŠŸèƒ½ |
|------|------|
| `/admin/login` | ç®¡ç†å“¡ç™»å…¥ |
| `/admin/products` | ç”¢å“ç®¡ç† |
| `/admin/products/[id]/edit` | ç·¨è¼¯ç”¢å“ï¼ˆå«å°ºç¢¼ç®¡ç†ï¼‰ |
| `/admin/brands` | å“ç‰Œç®¡ç† |
| `/admin/orders` | è¨‚å–®ç®¡ç† |
| `/admin/users` | ç”¨æˆ¶ç®¡ç† |
| `/admin/credits` | è³¼ç‰©é‡‘ç®¡ç† |
| `/admin/referral-settings` | é‚€è«‹ç¢¼è¨­å®š |
| `/admin/announcements` | å…¬å‘Šç®¡ç† |
| `/admin/faqs` | FAQ ç®¡ç† |
| `/admin/returns` | é€€è²¨å¯©æ ¸ |
| `/admin/homepage` | é¦–é å…§å®¹ç®¡ç† |
| `/admin/email-campaigns` | éƒµä»¶è¡ŒéŠ· |

---

## ğŸ“¦ å¸¸ç”¨æŒ‡ä»¤

### é–‹ç™¼ç’°å¢ƒ

```bash
pnpm dev                    # å•Ÿå‹•é–‹ç™¼ä¼ºæœå™¨
pnpm db:generate            # ç”Ÿæˆ Prisma Client
pnpm db:migrate             # è³‡æ–™åº«é·ç§»ï¼ˆé–‹ç™¼ç’°å¢ƒï¼‰
pnpm db:studio              # æŸ¥çœ‹è³‡æ–™åº«ï¼ˆPrisma Studioï¼‰
```

### æ¸¬è©¦èˆ‡æ§‹å»º

```bash
pnpm test                   # åŸ·è¡Œæ¸¬è©¦
pnpm test:watch             # æ¸¬è©¦ç›£è¦–æ¨¡å¼
pnpm build                  # å»ºæ§‹ç”Ÿç”¢ç‰ˆæœ¬
pnpm start                  # å•Ÿå‹•ç”Ÿç”¢ä¼ºæœå™¨
pnpm lint                   # ç¨‹å¼ç¢¼æª¢æŸ¥
```

### è³‡æ–™åº«ç®¡ç†

```bash
pnpm prisma migrate status  # æŸ¥çœ‹å¾…è™•ç†çš„é·ç§»
pnpm db:deploy              # éƒ¨ç½²é·ç§»ï¼ˆç”Ÿç”¢ç’°å¢ƒï¼‰
pnpm prisma migrate reset   # é‡ç½®è³‡æ–™åº«ï¼ˆå±éšªï¼æœƒæ¸…ç©ºè³‡æ–™ï¼‰
```

**âš ï¸ é‡è¦**ï¼šç¦æ­¢ä½¿ç”¨ `--accept-data-loss` åƒæ•¸ï¼ˆæ ¹æ“š CLAUDE.md è¦ç¯„ï¼‰

---

## ğŸ“ å°ˆæ¡ˆæ¶æ§‹

```
shoe/
â”œâ”€â”€ app/                    # Next.js App Routerï¼ˆå‰ç«¯ + APIï¼‰
â”‚   â”œâ”€â”€ api/graphql/        # GraphQL API ç«¯é»ï¼ˆå¾Œç«¯æ ¸å¿ƒï¼‰
â”‚   â”œâ”€â”€ admin/              # å¾Œå°ç®¡ç†ï¼ˆéœ€ ADMIN æ¬Šé™ï¼‰
â”‚   â”œâ”€â”€ account/            # ç”¨æˆ¶å¸³æˆ¶é é¢
â”‚   â”œâ”€â”€ auth/               # èªè­‰é é¢ï¼ˆLINE Loginï¼‰
â”‚   â”œâ”€â”€ help/               # å¹«åŠ©ä¸­å¿ƒï¼ˆFAQ + å®¢æœè¯ç¹«ï¼‰
â”‚   â”œâ”€â”€ products/           # ç”¢å“é é¢
â”‚   â”œâ”€â”€ cart/               # è³¼ç‰©è»Š
â”‚   â”œâ”€â”€ checkout/           # çµå¸³
â”‚   â”œâ”€â”€ wishlist/           # é¡˜æœ›æ¸…å–®
â”‚   â””â”€â”€ bundles/            # çµ„åˆå¥—è£
â”œâ”€â”€ components/             # React çµ„ä»¶
â”‚   â”œâ”€â”€ admin/              # å¾Œå°çµ„ä»¶
â”‚   â”œâ”€â”€ product/            # ç”¢å“ç›¸é—œï¼ˆå°ºç¢¼é¸æ“‡å™¨ã€é¡è‰²é¸æ“‡å™¨ï¼‰
â”‚   â”œâ”€â”€ checkout/           # çµå¸³ç›¸é—œï¼ˆè³¼ç‰©é‡‘é¸æ“‡å™¨ï¼‰
â”‚   â”œâ”€â”€ navigation/         # å°èˆªçµ„ä»¶
â”‚   â”œâ”€â”€ sections/           # é¦–é å€å¡Šçµ„ä»¶
â”‚   â””â”€â”€ common/             # é€šç”¨çµ„ä»¶ï¼ˆå…¬å‘Šã€é‚€è«‹ç¢¼è¿½è¹¤ï¼‰
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ graphql/            # GraphQL é…ç½®
â”‚   â”‚   â”œâ”€â”€ resolvers/      # æ¥­å‹™é‚è¼¯ï¼ˆauth, product, cart, order...ï¼‰
â”‚   â”‚   â”œâ”€â”€ schema.ts       # Schema å®šç¾©
â”‚   â”‚   â””â”€â”€ queries.ts      # å‰ç«¯æŸ¥è©¢å®šç¾©
â”‚   â”œâ”€â”€ lib/                # æ ¸å¿ƒå·¥å…·
â”‚   â”‚   â”œâ”€â”€ prisma.ts       # è³‡æ–™åº« ORM
â”‚   â”‚   â”œâ”€â”€ auth.ts         # JWT èªè­‰
â”‚   â”‚   â”œâ”€â”€ line.ts         # LINE OAuth å’Œ Messaging API
â”‚   â”‚   â”œâ”€â”€ redis.ts        # å¿«å–é€£æ¥
â”‚   â”‚   â”œâ”€â”€ cache.ts        # å¿«å–ç­–ç•¥
â”‚   â”‚   â””â”€â”€ slugify.ts      # Slug è‡ªå‹•ç”Ÿæˆ
â”‚   â””â”€â”€ contexts/           # React Contextï¼ˆAuthContextï¼‰
â””â”€â”€ prisma/
    â””â”€â”€ schema.prisma       # è³‡æ–™åº« Schema
```

**æŠ€è¡“æ¶æ§‹èªªæ˜**ï¼š
- **å…¨ç«¯å–®é«”æ¶æ§‹** - å‰å¾Œç«¯æ•´åˆåœ¨åŒä¸€å°ˆæ¡ˆ
- **è³‡æ–™æµå‘**: ç”¨æˆ¶ç€è¦½å™¨ â†’ React çµ„ä»¶ â†’ Apollo Client â†’ GraphQL API â†’ Prisma ORM â†’ PostgreSQL
- **èªè­‰æµç¨‹**: LINE OAuth â†’ JWT Token â†’ æ¬Šé™æª¢æŸ¥

---

## ğŸ¨ æ ¸å¿ƒåŠŸèƒ½èªªæ˜

### ğŸ›’ è¨ªå®¢çµå¸³ç³»çµ±

- **ç„¡éœ€è¨»å†Šå³å¯è³¼è²·** - é™ä½è³¼è²·é–€æª»ï¼Œæå‡è½‰æ›ç‡
- **localStorage è¨ªå®¢è³¼ç‰©è»Š** - ç€è¦½å™¨æœ¬åœ°å„²å­˜ï¼Œä¸éœ€è¦å¾Œç«¯
- **å¿…å¡«æ‰‹æ©Ÿè™Ÿç¢¼** - ç”¨æ–¼è¨‚å–®è¿½è¹¤å’Œè¯ç¹«
- **å¼·åŠ›å¼•å°è¨»å†Š** - çµå¸³é å’Œè¨‚å–®å®Œæˆé é¡¯ç¤ºæœƒå“¡å¥½è™•
- **è¨‚å–®è¿½è¹¤é é¢** (`/orders/track`) - è¨‚å–®ç·¨è™Ÿ + æ‰‹æ©Ÿè™Ÿç¢¼æŸ¥è©¢
- **åŠŸèƒ½é™åˆ¶** - è¨ªå®¢ç„¡æ³•ä½¿ç”¨è³¼ç‰©é‡‘ã€å„ªæƒ åˆ¸ã€é‚€è«‹ç¢¼çå‹µ

### ğŸš€ å¿«é€ŸåŠ å…¥è³¼ç‰©è»Š Modal

- **æ–°å¢çµ„ä»¶**: `components/product/QuickAddToCartModal.tsx`
- **ä½¿ç”¨ä½ç½®**: é¦–é äººæ°£ç²¾é¸å€å¡Š (`components/sections/PopularProducts.tsx`)
- **æ ¸å¿ƒåŠŸèƒ½**:
  - æ‡¸åœå•†å“å¡ç‰‡é¡¯ç¤ºã€ŒåŠ å…¥è³¼ç‰©è»Šã€æŒ‰éˆ•ï¼ˆåƒ…æ¡Œé¢ç‰ˆï¼‰
  - é»æ“Šå¾Œå½ˆå‡º Modalï¼Œç„¡éœ€è·³è½‰å³å¯é¸æ“‡å°ºç¢¼ã€é¡è‰²ã€æ•¸é‡
  - å³æ™‚é¡¯ç¤ºåº«å­˜ç‹€æ…‹ï¼Œç„¡åº«å­˜å°ºç¢¼è‡ªå‹•ç¦ç”¨
  - æ”¯æ´é¡è‰²è®Šé«”é¸æ“‡ï¼ˆå¦‚æœç”¢å“æœ‰å¤šç¨®é¡è‰²ï¼‰
  - é›†æˆ GraphQL `ADD_TO_CART` mutation
  - æˆåŠŸå¾Œé¡¯ç¤º toast æç¤ºä¸¦è‡ªå‹•é—œé–‰ Modal
  - è‡ªå‹•é‡æ–°æŸ¥è©¢è³¼ç‰©è»Šæ•¸æ“šï¼Œæ›´æ–°å°èˆªæ¬„è³¼ç‰©è»Šæ•¸é‡
- **éŒ¯èª¤è™•ç†**: å®Œæ•´é¡¯ç¤ºæ‰€æœ‰éŒ¯èª¤è¨Šæ¯ï¼ˆåº«å­˜ä¸è¶³ã€å°ºç¢¼æœªé¸ç­‰ï¼‰
- **ç”¨æˆ¶é«”é©—**: ä¸é›¢é–‹é¦–é å³å¯å¿«é€ŸåŠ å…¥è³¼ç‰©è»Šï¼Œæå‡è½‰æ›ç‡

### ğŸ’° è³¼ç‰©é‡‘èˆ‡å„ªæƒ åˆ¸ç³»çµ±

- **ç”¨æˆ¶éŒ¢åŒ…é é¢** (`/account/wallet`) - åˆ†é æŸ¥çœ‹è³¼ç‰©é‡‘å’Œå„ªæƒ åˆ¸
- å¾Œå°ç™¼æ”¾ï¼ˆå–®ä¸€/æ‰¹é‡ï¼‰
- è¨­å®šä½¿ç”¨é™åˆ¶ï¼ˆæœ€ä½è¨‚å–®é‡‘é¡ã€å–®ç­†æœ€å¤§ä½¿ç”¨é¡ï¼‰
- æœ‰æ•ˆæœŸé™ç®¡ç†
- ä¾†æºè¿½è¹¤ï¼ˆæ´»å‹•/é€€æ¬¾/ç”Ÿæ—¥/è©•åƒ¹ï¼‰
- çµå¸³æ™‚è‡ªå‹•è¨ˆç®—å¯ç”¨é‡‘é¡

### ğŸ é‚€è«‹ç¢¼ç³»çµ±

- **å¾Œå°å…¨é¢å¯é…ç½®** - ç®¡ç†å“¡åœ¨ `/admin/referral-settings` èª¿æ•´æ‰€æœ‰è¦å‰‡
  - å•Ÿç”¨/åœç”¨é‚€è«‹ç¢¼ç³»çµ±
  - çå‹µé¡å‹ï¼šå›ºå®šé‡‘é¡ or è¨‚å–®ç™¾åˆ†æ¯”
  - è¨‚å–®é‡‘é¡é–€æª»
  - æ¯äººçå‹µæ¬¡æ•¸ä¸Šé™ï¼ˆ0 = ç„¡é™åˆ¶ï¼‰
  - è³¼ç‰©é‡‘æœ‰æ•ˆæœŸ
- **ç®¡ç†å“¡çµ±è¨ˆå„€è¡¨æ¿** - å³æ™‚æŸ¥çœ‹å…¨ç«™é‚€è«‹æ•¸æ“š
- **éš±ç§ä¿è­·é‚€è«‹ç¢¼** - 8 ä½ç´”éš¨æ©Ÿé‚€è«‹ç¢¼ï¼ˆæ°¸ä¸éæœŸï¼‰
  - æ ¼å¼ï¼šå¤§å¯«å­—æ¯ + æ•¸å­—çµ„åˆï¼ˆä¾‹å¦‚ï¼š`A3F9K2R8`ï¼‰
  - æ’é™¤å®¹æ˜“æ··æ·†çš„å­—ç¬¦ï¼ˆ0, O, 1, I, Lï¼‰
  - ä¸åŒ…å«ä»»ä½•å€‹äººè³‡æ–™
- **éš±è”½å¼è¿½è¹¤** - è¨˜éŒ„é‚€è«‹ç¢¼å¾Œè‡ªå‹•æ¸…é™¤ URL åƒæ•¸

### ğŸ¨ é¦–é å…§å®¹ç®¡ç†

- **å®Œå…¨å®¢è£½åŒ–æ§åˆ¶** - å¾Œå°å¯æ§åˆ¶é¦–é æ¯å€‹çµ„ä»¶çš„é¡¯ç¤ºã€æ’åºã€å…§å®¹
- **æ‹–æ”¾å¼æ’åº** - ç›´è§€çš„æ‹–æ”¾ä»‹é¢ï¼Œè¼•é¬†èª¿æ•´çµ„ä»¶é †åº
- **å³æ™‚é è¦½** - ä¿®æ”¹å¾Œç«‹å³åœ¨å‰å°ç”Ÿæ•ˆï¼Œç„¡éœ€é‡æ–°éƒ¨ç½²
- **çµ„ä»¶é–‹é—œ** - ä¸€éµå•Ÿç”¨/åœç”¨ä»»ä½•é¦–é çµ„ä»¶
- **å‹•æ…‹å…§å®¹ç®¡ç†**ï¼š
  - è¼ªæ’­åœ–ï¼šå¤šåœ–ç®¡ç†ã€æ–‡å­—ä½ç½®ã€é¡è‰²ã€é®ç½©ã€æ™‚é–“æ§åˆ¶
  - ä¿ƒéŠ·å€’è¨ˆæ™‚ï¼šè‡ªå®šç¾©æ¨™é¡Œã€æ™‚é–“ã€é¡è‰²ã€é€£çµ
  - æœå‹™ä¿è­‰æ¬„ï¼šåœ–æ¨™ã€æ–‡å­—ã€é€£çµå®Œå…¨è‡ªå®šç¾©
  - é™æ™‚æ¶è³¼ï¼šæ™‚é–“è¨­å®šã€ç”¢å“é¸æ“‡ã€èƒŒæ™¯è¨­å®š
  - ä»Šæ—¥å¿…æ¶ï¼šæ¨™é¡Œè¨­å®šã€å–®å€‹ç²¾é¸ç”¢å“é¸æ“‡
  - ç†±é–€ç”¢å“ï¼šå¤šç¨®ç®—æ³•ï¼ˆæ‰‹å‹•/éŠ·é‡/è©•åˆ†/è¶¨å‹¢ï¼‰

### ğŸ çµ„åˆå¥—è£ä¿ƒéŠ·ç³»çµ±

- **å¾Œå°å‰µå»ºçµ„åˆ** - å¤šå•†å“çµ„åˆå„ªæƒ åƒ¹
- **æ™‚é–“é™åˆ¶** - è¨­å®šé–‹å§‹/çµæŸæ™‚é–“
- **ç²¾é¸æ¨è–¦** - é¦–é å±•ç¤ºè¨­å®š
- **æ¯äººé™è³¼** - æ§åˆ¶è³¼è²·æ•¸é‡
- **å‰å°å±•ç¤º** - `/bundles` åˆ—è¡¨é ã€`/bundles/[slug]` è©³æƒ…é 
- **è³¼ç‰©è»Šæ•´åˆ** - ä¸€éµåŠ å…¥æ‰€æœ‰ç”¢å“

### â¤ï¸ é¡˜æœ›æ¸…å–®åŠŸèƒ½

- **æ”¶è—å–œæ„›å•†å“** - ä¸€éµåŠ å…¥é¡˜æœ›æ¸…å–®
- **é›†ä¸­ç®¡ç†** - `/wishlist` é é¢æŸ¥çœ‹æ‰€æœ‰æ”¶è—
- **å¿«é€Ÿè³¼è²·** - å¾é¡˜æœ›æ¸…å–®ç›´æ¥åŠ å…¥è³¼ç‰©è»Š
- **è‡ªå‹•çµ±è¨ˆ** - ç”¢å“æ”¶è—æ•¸è¿½è¹¤

### ğŸ”„ å®Œæ•´é€€è²¨æµç¨‹

1. å®¢æˆ¶æäº¤ç”³è«‹ â†’ é¸æ“‡è¨‚å–®å’Œå•†å“ã€å¡«å¯«åŸå› 
2. è³£å®¶å¯©æ ¸ â†’ æ‰¹å‡†æˆ–æ‹’çµ•
3. å®¢æˆ¶å¯„ä»¶ â†’ 711 ä¾¿åˆ©åº—å¯„ä»¶ä¸¦ä¸Šå‚³å–®è™Ÿ
4. è³£å®¶ç¢ºèªæ”¶è²¨ â†’ é©—è­‰å•†å“ç‹€æ…‹
5. è™•ç†é€€æ¬¾ â†’ è‡ªå‹•æ¢å¾©åº«å­˜ã€ç™¼æ”¾è³¼ç‰©é‡‘ï¼ˆæœ‰æ•ˆæœŸ 6 å€‹æœˆï¼‰

### ğŸ“§ éƒµä»¶è¡ŒéŠ·ç³»çµ±

- **åˆæ³•åˆè¦** - ç”¨æˆ¶æ˜ç¢ºåŒæ„æ©Ÿåˆ¶ + ä¸€éµé€€è¨‚é€£çµ
- **SMTP ç¾¤ç™¼** - ä½¿ç”¨ Nodemailer ç™¼é€éƒµä»¶
- **ç”¨æˆ¶è¨‚é–±ç®¡ç†** - å‰å° Footer è¨‚é–± + å¸³æˆ¶è¨­å®šç®¡ç†
- **å¾Œå°ç®¡ç†ä»‹é¢** - å‰µå»ºæ´»å‹•ã€ç·¨è¼¯éƒµä»¶ã€æŸ¥çœ‹ç™¼é€è¨˜éŒ„
- **æ¸¬è©¦ç™¼é€åŠŸèƒ½** - ç™¼é€å‰æ¸¬è©¦éƒµä»¶å…§å®¹
- **ç™¼é€è¨˜éŒ„è¿½è¹¤** - æˆåŠŸ/å¤±æ•—çµ±è¨ˆã€éŒ¯èª¤è¨Šæ¯è¨˜éŒ„

### â“ FAQ å¹«åŠ©ä¸­å¿ƒç³»çµ±

- **å¹«åŠ©ä¸­å¿ƒé é¢** (`/help`) - æ•´åˆå¼å®¢æœä¸­å¿ƒ
  - å¸¸è¦‹å•é¡Œ FAQï¼ˆæ‰‹é¢¨ç´å¼å±•é–‹ï¼‰
  - å¿«é€ŸæŒ‡å—å¡ç‰‡ï¼ˆè¨‚å–®è¿½è¹¤ã€é€€æ›è²¨ã€é…é€ã€æœƒå“¡æ¬Šç›Šï¼‰
  - å®¢æœè¯ç¹«æ–¹å¼ï¼ˆç·šä¸Šå®¢æœã€Emailï¼‰
  - å…¶ä»–æœ‰ç”¨è³‡æºï¼ˆå°ºç¢¼æŒ‡å—ã€ä¿é¤Šå»ºè­°ã€ä»˜æ¬¾æ–¹å¼ï¼‰
- **å¾Œå° FAQ ç®¡ç†** (`/admin/faqs`) - å®Œæ•´çš„ CRUD åŠŸèƒ½
  - å•é¡Œèˆ‡ç­”æ¡ˆç·¨è¼¯
  - åˆ†é¡ç®¡ç†ï¼ˆç”¢å“ã€è¨‚è³¼ã€é…é€ã€é€€æ›è²¨ç­‰ï¼‰
  - æ’åºæ§åˆ¶ï¼ˆsortOrder æ¬„ä½ï¼‰
  - ç™¼å¸ƒ/è‰ç¨¿ç‹€æ…‹åˆ‡æ›
  - ç€è¦½æ¬¡æ•¸å’Œæœ‰ç”¨è¨ˆæ•¸çµ±è¨ˆ
- **å‰ç«¯çµ„ä»¶** (`components/sections/FAQSection.tsx`) - å¯é‡è¤‡ä½¿ç”¨çš„ FAQ å€å¡Š
  - è‡ªå‹•å¾è³‡æ–™åº«æŸ¥è©¢å·²ç™¼å¸ƒçš„ FAQ
  - å„ªé›…çš„æ‰‹é¢¨ç´å¼å±•é–‹å‹•ç•«
  - æŒ‰åˆ†é¡å’Œæ’åºé¡¯ç¤º
- **è³‡æ–™è¡¨**: `faqs` - åŒ…å«å•é¡Œã€ç­”æ¡ˆã€åˆ†é¡ã€slugã€ç€è¦½è¨ˆæ•¸ç­‰æ¬„ä½

---

## ğŸ” æ¬Šé™èˆ‡å®‰å…¨

### å¤šå±¤å®‰å…¨é˜²è­·

1. **ä¼ºæœå™¨ç«¯è·¯ç”±ä¿è­·** (`middleware.ts`)
   - Token é©—è­‰ï¼ˆCookie + Authorization Headerï¼‰
   - JWT è§£æèˆ‡è§’è‰²æª¢æŸ¥
   - è‡ªå‹•è·³è½‰ç™»å…¥é ä¸¦ä¿ç•™åŸå§‹ URL

2. **å®¢æˆ¶ç«¯æ¬Šé™æª¢æŸ¥** (`AdminAuthGuard.tsx`)
   - é›™é‡é˜²è­·çš„ç¬¬äºŒé“é˜²ç·š
   - é˜»æ­¢æœªæˆæ¬Šæ¸²æŸ“

3. **GraphQL API æ¬Šé™æª¢æŸ¥**
   - æ¯å€‹ Resolver éƒ½æª¢æŸ¥ JWT Token
   - ç®¡ç†å“¡æ“ä½œéœ€é©—è­‰ ADMIN è§’è‰²

### æœƒå“¡ç­‰ç´šç³»çµ±

**å®Œå…¨å‹•æ…‹é…ç½®** - å¾Œå°å¯è‡ªç”±æ–°å¢/åˆªé™¤/é‡å‘½åæœƒå“¡ç­‰ç´š

**é è¨­ç­‰ç´š**ï¼ˆå¯ä¿®æ”¹ï¼‰ï¼š
- BRONZEï¼ˆéŠ…ï¼‰: $0 - $9,999
- SILVERï¼ˆéŠ€ï¼‰: $10,000 - $49,999
- GOLDï¼ˆé‡‘ï¼‰: $50,000 - $99,999
- PLATINUMï¼ˆç™½é‡‘ï¼‰: $100,000 - $199,999
- DIAMONDï¼ˆé‘½çŸ³ï¼‰: $200,000+

**å‡ç´šæ©Ÿåˆ¶**ï¼šæ ¹æ“šç´¯è¨ˆæ¶ˆè²»è‡ªå‹•å‡ç´šï¼Œå‡ç´šæ™‚ç™¼æ”¾çå‹µè³¼ç‰©é‡‘

---

## âš¡ æ•ˆèƒ½å„ªåŒ–

### ğŸ¯ å„ªåŒ–æˆæœ

| æŒ‡æ¨™ | å„ªåŒ–å‰ | å„ªåŒ–å¾Œ | æå‡ |
|------|--------|--------|------|
| ç”¢å“åˆ—è¡¨è¼‰å…¥æ™‚é–“ | ~800ms | ~150ms | **81%** â†‘ |
| è³‡æ–™åº«æŸ¥è©¢æ¬¡æ•¸ | 10-15 æ¬¡ | 2-3 æ¬¡ | **80%** â†“ |
| é¦–å±æ¸²æŸ“æ™‚é–“ (LCP) | ~1.2s | ~300ms | **75%** â†‘ |
| é¦–é åœ–ç‰‡é »å¯¬ | 100% | 40% | **-60%** |
| API å¿«å–å‘½ä¸­ç‡ | 0% | 80-90% | **âˆ** â†‘ |
| Lighthouse åˆ†æ•¸ | 65 | 95+ | **+46%** |

### å·²å®Œæˆå„ªåŒ–æ¸…å–®

**å‰ç«¯å„ªåŒ–**ï¼š
- âœ… Apollo Client å¿«å–ç­–ç•¥ (`cache-and-network`)
- âœ… Next.js Image è‡ªå‹•å„ªåŒ–ï¼ˆAVIF/WebP + responsive sizesï¼‰
- âœ… åœ–ç‰‡æ‡¶è¼‰å…¥ (`loading="lazy"`)
- âœ… React çµ„ä»¶ memoization (`React.memo` + `useMemo`)
- âœ… ç„¡é™æ»¾å‹•ï¼ˆIntersection Observer APIï¼‰
- âœ… éª¨æ¶å±è¼‰å…¥ç‹€æ…‹ï¼ˆSkeleton UIï¼‰
- âœ… Server Componentsï¼ˆæ¸›å°‘ 30KB bundleï¼‰

**å¾Œç«¯å„ªåŒ–**ï¼š
- âœ… Redis å¿«å–å±¤ï¼ˆç”¢å“/åˆ†é¡/å“ç‰Œï¼‰- å‘½ä¸­ç‡ 80-90%
- âœ… ç”¢å“åˆ—è¡¨æŸ¥è©¢å¿«å–ï¼ˆTTL: 10minï¼‰
- âœ… GraphQL N+1 æŸ¥è©¢ä¿®å¾©ï¼ˆæŸ¥è©¢æ¸›å°‘ 80%ï¼‰
- âœ… è³‡æ–™åº«è¤‡åˆç´¢å¼•å„ªåŒ–ï¼ˆ18 å€‹ç´¢å¼•ï¼‰
- âœ… æ¢ä»¶å¼é—œè¯è¼‰å…¥ï¼ˆé¿å…éåº¦ includeï¼‰
- âœ… API Rate Limitingï¼ˆ100 req/minï¼‰

---

## ğŸ“Š è³‡æ–™åº«çµæ§‹

### æ ¸å¿ƒè³‡æ–™è¡¨

- `users` - ç”¨æˆ¶è³‡æ–™
- `products` - ç”¢å“è³‡æ–™
- `product_variants` - é¡è‰²è®Šé«”
- `size_charts` - å°ºç¢¼è¡¨ï¼ˆå«ç¨ç«‹åº«å­˜ï¼‰
- `brands` - å“ç‰Œ
- `categories` - åˆ†é¡
- `orders` - è¨‚å–®
- `order_items` - è¨‚å–®é …ç›®
- `carts` - è³¼ç‰©è»Š
- `cart_items` - è³¼ç‰©è»Šé …ç›®
- `coupons` - æŠ˜åƒ¹åˆ¸
- `user_coupons` - ç”¨æˆ¶å„ªæƒ åˆ¸
- `user_credits` - è³¼ç‰©é‡‘
- `announcements` - å…¬å‘Š
- `referral_codes` - é‚€è«‹ç¢¼
- `referral_usages` - é‚€è«‹ç¢¼ä½¿ç”¨è¨˜éŒ„
- `returns` - é€€è²¨ç”³è«‹
- `wishlist_items` - é¡˜æœ›æ¸…å–®
- `product_bundles` - çµ„åˆå¥—è£
- `homepage_configs` - é¦–é é…ç½®

### é‡è¦æ¬„ä½èªªæ˜

**Product é‹åº—å°ˆå±¬**ï¼š
- `shoeType` - é‹é¡å‹ï¼ˆé‹å‹•é‹ã€çš®é‹ã€æ¶¼é‹ã€é´å­ï¼‰
- `gender` - æ€§åˆ¥ï¼ˆç”·ã€å¥³ã€ä¸­æ€§ã€å…’ç«¥ï¼‰
- `season` - å­£ç¯€ï¼ˆæ˜¥å¤ã€ç§‹å†¬ã€å››å­£ï¼‰
- `heelHeight` - é‹è·Ÿé«˜åº¦
- `closure` - é–‰åˆæ–¹å¼ï¼ˆç³»å¸¶ã€é­”è¡“è²¼ã€æ‹‰éˆã€å¥—è„šï¼‰
- `sole` - é‹åº•æè³ª

**SizeChart å°ºç¢¼å°ç…§è¡¨**ï¼š
- `eu`, `us`, `uk`, `cm` - å››ç¨®å°ºç¢¼æ¨™æº–
- `footLength` - è…³é•·ï¼ˆå˜ç±³ï¼‰
- `stock` - è©²å°ºç¢¼çš„ç¨ç«‹åº«å­˜ï¼ˆçœŸå¯¦åº«å­˜ä¾†æºï¼‰

**UserCredit è³¼ç‰©é‡‘**ï¼š
- `balance` - é¤˜é¡ï¼ˆå¯èƒ½è¢«éƒ¨åˆ†ä½¿ç”¨ï¼‰
- `maxUsagePerOrder` - å–®ç­†è¨‚å–®æœ€å¤§ä½¿ç”¨é¡
- `minOrderAmount` - æœ€ä½è¨‚å–®é‡‘é¡é™åˆ¶
- `validUntil` - æœ‰æ•ˆæœŸé™

---

## ğŸ“ API æ–‡æª”

GraphQL API ä½æ–¼ `/api/graphql`

### ä¸»è¦ Queries

```graphql
# ç”¨æˆ¶
me
users

# ç”¢å“
products(
  categoryId: ID
  brandId: ID
  minPrice: Float
  maxPrice: Float
  sortBy: String
  limit: Int
  offset: Int
)
product(id: ID, slug: String)
brands
categories

# è³¼ç‰©è»Š
cart
guestCart(guestCartData: String!)

# è¨‚å–®
myOrders
order(id: ID!)

# è³¼ç‰©é‡‘
myCredits
availableCreditAmount

# é‚€è«‹ç¢¼
myReferralCode
referralStats

# é¡˜æœ›æ¸…å–®
myWishlist
isInWishlist(productId: ID!)

# çµ„åˆå¥—è£
activeBundles
homepageBundles
productBundle(slug: String!)

# å…¬å‘Š
activeAnnouncements

# é¦–é é…ç½®
homepageConfigs
activeHeroSlides
latestFlashSale
```

### ä¸»è¦ Mutations

```graphql
# èªè­‰
getLineLoginUrl
lineLoginCallback(code: String!, referralCode: String)
adminQuickLogin(code: String!)

# ç”¢å“ç®¡ç†
createProduct(input: CreateProductInput!)
updateProduct(id: ID!, input: UpdateProductInput!)
deleteProduct(id: ID!)

# å°ºç¢¼ç®¡ç†
createSizeChart(input: CreateSizeChartInput!)
updateSizeChart(id: ID!, input: UpdateSizeChartInput!)
deleteSizeChart(id: ID!)

# è³¼ç‰©è»Š
addToCart(productId: ID!, variantId: ID!, sizeChartId: ID!, quantity: Int!)
updateCartItem(id: ID!, quantity: Int!)
removeFromCart(id: ID!)

# è¨‚å–®
createOrder(input: CreateOrderInput!)
updateOrderStatus(id: ID!, status: OrderStatus!)

# é¡˜æœ›æ¸…å–®
toggleWishlist(productId: ID!)
removeFromWishlist(id: ID!)
clearWishlist

# è³¼ç‰©é‡‘
grantCredit(input: GrantCreditInput!)
batchGrantCredit(input: BatchGrantCreditInput!)

# çµ„åˆå¥—è£
createProductBundle(input: CreateProductBundleInput!)
updateProductBundle(id: ID!, input: UpdateProductBundleInput!)
deleteProductBundle(id: ID!)

# å…¬å‘Š
createAnnouncement(input: CreateAnnouncementInput!)
updateAnnouncement(id: ID!, input: UpdateAnnouncementInput!)

# é€€è²¨
createReturn(input: CreateReturnInput!)
updateReturnStatus(id: ID!, input: UpdateReturnStatusInput!)
```

### ä½¿ç”¨ç¯„ä¾‹

```graphql
# æŸ¥è©¢ç”¢å“
query GetProduct($slug: String!) {
  product(slug: $slug) {
    id
    name
    price
    variants {
      id
      color
      colorHex
      stock
    }
    sizeCharts {
      eu
      us
      uk
      cm
      stock
    }
  }
}

# åŠ å…¥è³¼ç‰©è»Š
mutation AddToCart($productId: ID!, $variantId: ID!, $sizeChartId: ID!, $quantity: Int!) {
  addToCart(
    productId: $productId
    variantId: $variantId
    sizeChartId: $sizeChartId
    quantity: $quantity
  ) {
    id
    items {
      id
      quantity
    }
  }
}

# ä½¿ç”¨è³¼ç‰©é‡‘çµå¸³
mutation CreateOrder($input: CreateOrderInput!) {
  createOrder(input: $input) {
    id
    orderNumber
    total
    creditUsed
  }
}
```

---

## ğŸš€ éƒ¨ç½²

### ç”Ÿç”¢ç’°å¢ƒæª¢æŸ¥æ¸…å–®

- [ ] è¨­å®šç”Ÿç”¢ç’°å¢ƒè®Šæ•¸
- [ ] å‰µå»ºç”Ÿç”¢è³‡æ–™åº«
- [ ] åŸ·è¡Œè³‡æ–™åº«é·ç§»
- [ ] å•Ÿå‹• Redis æœå‹™å™¨
- [ ] é©—è­‰å¿«å–å‘½ä¸­ç‡ > 70%
- [ ] é…ç½® Prisma é€£æ¥æ± 
- [ ] é…ç½® CDNï¼ˆåœ–ç‰‡ï¼‰
- [ ] è¨­å®š HTTPS
- [ ] é…ç½®ç›£æ§å’Œæ—¥èªŒï¼ˆSentry/Datadogï¼‰
- [ ] å£“åŠ›æ¸¬è©¦ï¼ˆç¢ºä¿æ”¯æŒ 500+ req/sï¼‰

### è³‡æ–™åº«å‚™ä»½

```bash
# å‚™ä»½è³‡æ–™åº«
mkdir -p backups
pg_dump -h localhost -p 5432 -U postgres -F c -b -v \
  -f backups/shoe_store_backup_$(date +%Y%m%d_%H%M%S).dump \
  shoe_store

# é‚„åŸè³‡æ–™åº«
pg_restore -h localhost -p 5432 -U postgres \
  -d shoe_store_production \
  -v backups/shoe_store_backup_YYYYMMDD_HHMMSS.dump
```

### å»ºè­°éƒ¨ç½²å¹³å°

- **å…¨ç«¯æ‡‰ç”¨**: Vercel / Netlify
- **è³‡æ–™åº«**: Supabase / Railway / Neon
- **Redis**: Upstash / Redis Cloud
- **åœ–ç‰‡ CDN**: Cloudflare R2 / AWS S3 / Vercel Blob

---

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è¦‹å•é¡Œå¿«é€Ÿè§£æ±º

| å•é¡Œ | è§£æ±ºæ–¹æ¡ˆ |
|------|----------|
| Prisma Client éŒ¯èª¤ | `pnpm db:generate && pnpm dev` |
| è³‡æ–™åº«é€£ç·šå¤±æ•— | `brew services restart postgresql` |
| GraphQL æ¬Šé™éŒ¯èª¤ | `localStorage.clear()` å¾Œé‡æ–°ç™»å…¥ |
| å¾Œå°å¡åœ¨ Loading | æ¸…é™¤ç€è¦½å™¨å¿«å–ä¸¦é‡æ–°æ•´ç† |
| é·ç§»å¤±æ•— | `pnpm prisma migrate status` æª¢æŸ¥ç‹€æ…‹ |
| è³¼ç‰©è»Šé¡¯ç¤ºéŒ¯èª¤æ•¸å­— | æª¢æŸ¥æ˜¯å¦æœ‰éæœŸçš„ JWT Token |
| ç”¢å“åº«å­˜é¡¯ç¤ºä¸æ­£ç¢º | ç”¢å“åº«å­˜ä¾†è‡ª SizeChart è¡¨ï¼Œæª¢æŸ¥å°ºç¢¼åº«å­˜ |

### è³‡æ–™åº«é·ç§»å®‰å…¨è¦å‰‡

âš ï¸ **ç¦æ­¢ä½¿ç”¨ `--accept-data-loss` åƒæ•¸**ï¼ˆæ ¹æ“š CLAUDE.md è¦ç¯„ï¼‰

```bash
# å®‰å…¨é·ç§»æµç¨‹
pg_dump shoe_store > backup.sql  # å…ˆå‚™ä»½
pnpm db:migrate                  # åŸ·è¡Œé·ç§»

# é–‹ç™¼ç’°å¢ƒé‡ç½®ï¼ˆå±éšªï¼æœƒæ¸…ç©ºè³‡æ–™ï¼‰
pnpm prisma migrate reset
```

---

## ğŸ“ æœ€è¿‘é‡è¦æ›´æ–°

### 2025-11-04

- âœ… **ç”¢å“åº«å­˜é¡¯ç¤ºä¿®å¾©** - æ”¹ç”¨ SizeChart è¡¨çš„å°ºç¢¼åº«å­˜ç¸½å’Œï¼ˆ`totalStock` æ¬„ä½ï¼‰
- âœ… **çµ„åˆå¥—è£ç³»çµ±ä¸Šç·š** - å®Œæ•´çš„å‰å¾Œå°åŠŸèƒ½ï¼Œæ”¯æ´å¤šå•†å“çµ„åˆå„ªæƒ 
- âœ… **å°ºç¢¼ç®¡ç†ç³»çµ±é‡æ§‹** - Inline ç·¨è¼¯è¨­è¨ˆï¼Œç„¡éœ€å½ˆçª—ï¼ŒUX å¤§å¹…æå‡
- âœ… **é¡˜æœ›æ¸…å–®åŠŸèƒ½** - ç”¨æˆ¶å¯æ”¶è—å–œæ„›å•†å“
- âœ… **é¦–é å®Œå…¨å®¢è£½åŒ–** - å¾Œå°æ§åˆ¶æ‰€æœ‰çµ„ä»¶çš„é¡¯ç¤ºã€æ’åºã€å…§å®¹

### 2025-11-02

- âœ… **è³¼ç‰©è»Šèªè­‰éŒ¯èª¤è™•ç†** - è‡ªå‹•ç™»å‡ºéæœŸç”¨æˆ¶ï¼Œç„¡ç¸«åˆ‡æ›è¨ªå®¢æ¨¡å¼
- âœ… **é™æ™‚æ¶è³¼å‰å¾Œå°ä¸²æ¥** - å‰å°é é¢å®Œå…¨é€£æ¥å¾Œå°é…ç½®
- âœ… **ä¿ƒéŠ·å€’è¨ˆæ™‚åŠŸèƒ½** - æ”¯æ´è‡ªå®šç¾©æ¨™é¡Œã€æ™‚é–“ã€é¡è‰²

### 2025-11-01

- âœ… **è¦çš®/æ·˜å¯¶é¢¨æ ¼å¤§æ”¹ç‰ˆ** - ç†±é¬§ä¿ƒéŠ·é¢¨æ ¼ã€å¤šå€‹ä¿ƒéŠ·é é¢
- âœ… **éƒµä»¶è¡ŒéŠ·ç³»çµ±** - SMTP ç¾¤ç™¼ã€æ¸¬è©¦ç™¼é€ã€ç”¨æˆ¶è¨‚é–±ç®¡ç†
- âœ… **å…¬å‘Šç³»çµ±å„ªåŒ–** - å½ˆçª—å¼é¡¯ç¤ºã€æ™ºèƒ½æ›´æ–°æª¢æ¸¬

### 2025-10-30

- âœ… **é‚€è«‹ç¢¼éš±ç§ä¿è­·å‡ç´š** - 8 ä½ç´”éš¨æ©Ÿé‚€è«‹ç¢¼ï¼Œä¸åŒ…å«å€‹äººè³‡æ–™
- âœ… **é‚€è«‹ç¢¼ç³»çµ±æ¸¬è©¦å®Œæˆ** - å…¨éƒ¨æ¸¬è©¦é€šéï¼Œä¿®å¾© 3 å€‹åš´é‡ Bug

### 2025-10-29

- âœ… **æ•ˆèƒ½å„ªåŒ–å®Œæˆ** - éŸ¿æ‡‰é€Ÿåº¦æå‡ 5-20 å€
- âœ… **Redis å¿«å–ç³»çµ±** - å¿«å–å‘½ä¸­ç‡ 80-90%
- âœ… **ç”¢å“é é¢é‡æ–°è¨­è¨ˆ** - Nike/Adidas é¢¨æ ¼

---

## ğŸ“‹ æ–‡æª”èªªæ˜

**æœ¬ README.md æ˜¯å°ˆæ¡ˆçš„ä¸»è¦æ–‡æª”**ï¼Œæä¾›ï¼š
- å°ˆæ¡ˆæ¦‚è¿°èˆ‡å¿«é€Ÿé–‹å§‹
- è·¯ç”±èˆ‡åŠŸèƒ½èªªæ˜
- API æ–‡æª”èˆ‡ç¯„ä¾‹
- éƒ¨ç½²èˆ‡æ•…éšœæ’é™¤

**æŠ€è¡“ç´°ç¯€è«‹åƒè€ƒ**ï¼š`CLAUDE.md`ï¼ˆå°ˆç‚º AI é–‹ç™¼åŠ©æ‰‹è¨­è¨ˆï¼ŒåŒ…å«å®Œæ•´çš„æ¶æ§‹èªªæ˜å’Œé–‹ç™¼è¦å‰‡ï¼‰

---

## ğŸ¤ è²¢ç»èˆ‡æˆæ¬Š

### è²¢ç»æŒ‡å—

1. Fork å°ˆæ¡ˆ
2. å‰µå»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤è®Šæ›´ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. é–‹å•Ÿ Pull Request

### æˆæ¬Š

æœ¬å°ˆæ¡ˆæ¡ç”¨ MIT æˆæ¬Š - è©³è¦‹ [LICENSE](LICENSE) æ–‡ä»¶

---

ğŸ’¡ **æç¤º**: é‡åˆ°å•é¡Œè«‹å…ˆæŸ¥çœ‹ã€Œæ•…éšœæ’é™¤ã€ç« ç¯€ï¼Œå†æª¢æŸ¥ç€è¦½å™¨æ§åˆ¶å°å’Œçµ‚ç«¯æ©ŸéŒ¯èª¤è¨Šæ¯ã€‚

**å°ˆæ¡ˆç‹€æ…‹**: ç”Ÿç”¢å°±ç·’ âœ… | **ç‰ˆæœ¬**: 2.2.1 | **æœ€å¾Œæ›´æ–°**: 2025-11-04
